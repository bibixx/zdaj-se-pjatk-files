<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="pragma" content="no-cache">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
<meta http-equiv="Content-Language" content="pl">
<title></title>
<meta name="Keywords" content="s³owa kluczowe">
<meta name="Description" content="">
<LINK REL="stylesheet" TYPE="text/css" HREF="../main.css">
<LINK REL="stylesheet" TYPE="text/css" HREF="../style.html">
<script language="JavaScript" src="../skrypty.js" type="text/javascript"></script>
</head>
<body bgcolor="whitesmoke" leftmargin="8" topmargin="8" marginwidth="8" marginheight="8">
<!--body bgcolor="whitesmoke" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0"-->
<!--table width="100%" cellspacing="4" cellpadding="4" border="0"-->
<!--tr-->
    <!--td--><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr>
<td align="left"><A HREF="main10_p3.html" TARGET="main"  class="NAWIGACJA">&#171;&nbsp;poprzedni punkt</a>&nbsp;</td>
<td align="right">&nbsp;<A HREF="main10_p5.html" TARGET="main" class="NAWIGACJA">nastêpny punkt&nbsp;&#187;</a></td></tr></table>
<br clear="all"><A NAME="EDU.wyklad.punkt 4"></A>

<br clear="all">
<div class="tytulpunktu">4. Tablice z haszowaniem</div>
</p>
<p>W strukturach drzewiastych takich jak drzewa binarnych poszukiwañ czy kopce, 
pozycja elementu w drzewie zale¿y od relacji zachodz±cej miêdzy nim, a innymi 
elementami. W metodach haszuj±cych (mieszaj±cych) pozycja elementu jest 
wyliczana na podstawie warto¶ci elementu lub tzw. klucza, zwi±zanego z elementem.&nbsp; 
Funkcjê wyliczaj±c± pozycjê elementu w zbiorze nazywa siê funkcj± mieszaj±c± lub haszuj±c± (od ang. hash function). W³asno¶ci± szczególn± metod haszowania jest, 
¿e pozwalaj± one wykonaæ operacje wstawiania, usuwania i wyszukiwania elementu, z kosztem niezale¿nym od liczby elementów w zbiorze, tzn. z 
kosztem sta³ym ze wzglêdu na rozmiar danych. Struktury danych oparte na metodach haszowania nazywamy tablicami haszuj±cymi 
(lub tablicami z haszowaniem, tablicami z mieszaniem). S± one najczê¶ciej 
u¿ywanymi modelami abstrakcyjnej 
struktury s³ownika, o której by³a mowa w poprzednim punkcie wyk³adu.</p>
<p><b>Przyk³ad 4.1</b></p>





<p>Niech nr bêdzie funkcj± przypisuj±c± literom alfabetu kolejno liczby od 1 - 
26, np. nr(a) = 1, nr(b) = 2 itd. Okre¶limy funkcjê h ze zbioru s³ów w zbiór 
liczb naturalnych jako sumê warto¶ci przypisanych literom modulo 13: dla 
dowolnego s³owa <i><b>w</b></i> =(e<sub><font face="Verdana">1</font></sub>e<sub><font face="Verdana">2</font></sub> 
... e<sub><font face="Verdana">n</font></sub>)</p>





<p style="text-align: center">h(<i><b>w</b></i>) = (nr(e<sub><font face="Verdana">1</font></sub>) 
+ nr(e<sub><font face="Verdana">2</font></sub>) +...+ nr(e<sub><font face="Verdana">n</font></sub>)) 
mod 13.</p>





<p>Niech zbiór elementów X sk³ada siê z nastêpuj±cych s³ów:</p>





<p style="text-align: center">{antek, piotr, olek, asia, adam, 
basia, ola,  ina}</p>





<p>Wtedy&nbsp; h(antek) = (1+15+20+5+11) mod 13 = 52 mod 13 = 0 , h(piotr) = 
(17+9+16+20+18) mod 13 = 80 mod 13 = 2, h(ola) = (16+12+1) mod 13 = 3, itd. Do zapamiêtania zbioru X u¿yjemy 
tablicy TAB o&nbsp; 13 pozycjach. Warto¶æ funkcji h dla s³owa <i><b>w</b></i> traktujemy jako 
adres tego s³owa w tablicy TAB. Tablica haszuj±ca reprezentuj±ca zbiór X jest 
przedstawiona na rysunku 10.2. Pozycje 1, 8, 10, 11 tej tablicy nie s± zajête. </p>





<table border="1" style="border-collapse: collapse" bordercolor="#000000" width="60%" id="AutoNumber1">
  <tr>
    <td width="7%" bgcolor="#F5F5F5" bordercolor="#F5F5F5" align="center">&nbsp;</td>
    <td width="7%" bgcolor="#F5F5F5" bordercolor="#F5F5F5" align="center">&nbsp;</td>
    <td width="7%" bgcolor="#F5F5F5" bordercolor="#F5F5F5" align="center">&nbsp;</td>
    <td width="7%" bgcolor="#F5F5F5" bordercolor="#F5F5F5" align="center">&nbsp;</td>
    <td width="7%" bgcolor="#F5F5F5" bordercolor="#F5F5F5" align="center">&nbsp;</td>
    <td width="7%" bgcolor="#F5F5F5" bordercolor="#F5F5F5" align="center">&nbsp;</td>
    <td width="7%" bgcolor="#F5F5F5" bordercolor="#F5F5F5" align="center">&nbsp;</td>
    <td width="7%" bgcolor="#F5F5F5" bordercolor="#F5F5F5" align="center">&nbsp;</td>
    <td width="7%" bgcolor="#F5F5F5" bordercolor="#F5F5F5" align="center">&nbsp;</td>
    <td width="7%" bgcolor="#F5F5F5" bordercolor="#F5F5F5" align="center">&nbsp;</td>
    <td width="7%" bgcolor="#F5F5F5" bordercolor="#F5F5F5" align="center">&nbsp;</td>
    <td width="7%" bgcolor="#F5F5F5" bordercolor="#F5F5F5" align="center">&nbsp;</td>
    <td width="8%" bgcolor="#F5F5F5" bordercolor="#F5F5F5" align="center">&nbsp;</td>
    <td width="8%" bgcolor="#F5F5F5" bordercolor="#F5F5F5" align="center">&nbsp;</td>
    <td width="7%" bgcolor="#F5F5F5" bordercolor="#F5F5F5" align="center">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">0</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">1</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">2</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">3</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">4</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">5</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">6</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">7</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">8</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">9</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">10</td>
    <td width="8%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">11</td>
    <td width="8%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">12</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">TAB:</td>
    <td width="7%" align="center" bgcolor="#C0C0C0" bordercolor="#000000" bordercolorlight="#808080" bordercolordark="#C0C0C0">antek</td>
    <td width="7%" align="center" bgcolor="#C0C0C0" bordercolor="#000000" bordercolorlight="#808080" bordercolordark="#C0C0C0">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#C0C0C0" bordercolor="#000000" bordercolorlight="#808080" bordercolordark="#C0C0C0">
    piotr</td>
    <td width="7%" align="center" bgcolor="#C0C0C0" bordercolor="#000000" bordercolorlight="#808080" bordercolordark="#C0C0C0">
    ola</td>
    <td width="7%" align="center" bgcolor="#C0C0C0" bordercolor="#000000" bordercolorlight="#808080" bordercolordark="#C0C0C0">
    asia</td>
    <td width="7%" align="center" bgcolor="#C0C0C0" bordercolor="#000000" bordercolorlight="#808080" bordercolordark="#C0C0C0">
    olek</td>
    <td width="7%" align="center" bgcolor="#C0C0C0" bordercolor="#000000" bordercolorlight="#808080" bordercolordark="#C0C0C0">
    basia</td>
    <td width="7%" align="center" bgcolor="#C0C0C0" bordercolor="#000000" bordercolorlight="#808080" bordercolordark="#C0C0C0">
    adam</td>
    <td width="7%" align="center" bgcolor="#C0C0C0" bordercolor="#000000" bordercolorlight="#808080" bordercolordark="#C0C0C0">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#C0C0C0" bordercolor="#000000" bordercolorlight="#808080" bordercolordark="#C0C0C0">
    aga</td>
    <td width="7%" align="center" bgcolor="#C0C0C0" bordercolor="#000000" bordercolorlight="#808080" bordercolordark="#C0C0C0">&nbsp;</td>
    <td width="8%" align="center" bgcolor="#C0C0C0" bordercolor="#000000" bordercolorlight="#808080" bordercolordark="#C0C0C0">&nbsp;</td>
    <td width="8%" align="center" bgcolor="#C0C0C0" bordercolor="#000000" bordercolorlight="#808080" bordercolordark="#C0C0C0">
    ina</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </td>
  </tr>
  <tr>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="8%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="8%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="28%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5" colspan="4">
    Rysunek&nbsp; 10.2</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="8%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="8%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="8%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="8%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
    <td width="7%" align="center" bgcolor="#F5F5F5" bordercolor="#F5F5F5">&nbsp;</td>
  </tr>
</table>
<p>Je¶li pytamy, czy s³owo <i><b>w</b></i> nale¿y do zbioru reprezentowanego 
przez tablicê TAB, to wystarczy dla tego s³owa wyliczyæ warto¶æ funkcji h i 
sprawdziæ co znajduje siê na pozycji TAB(h(<i><b>w</b></i>)). Je¶li pozycja jest 
pusta lub znajduje siê tam inne, ni¿ <i><b>w</b></i>, s³owo, to s³owo <b><i>w</i></b> 
nie nale¿y do zbioru X. W przeciwnym przypadku <i><b>w </b></i>nale¿y do X.<font face="Wingdings">
</font><font face="Verdana">Proces do³±czenia nowego elementu do zbioru X 
zaczynamy od wyliczenia adresu, np. dla s³owa&nbsp; &quot;hania&quot;, h(hania) = 8. 
Nastêpnie sprawdzamy, czy wyliczona pozycja jest wolna i, o ile tak jest, 
wstawiamy nowy element do zbioru. Problem pojawia siê wtedy, gdy pod wyliczonym 
adresem s³owa znajduje siê ju¿ inne s³owo. Na przyk³ad, gdyby¶my do naszego 
zbioru X chcieli do³±czyæ s³owo &quot;kasia&quot;, to powstaje tzw. problem kolizji, 
poniewa¿ h(kasia)= (11+1+19+9+1) mod 13 = 2, a pozycja TAB(2) jest  aktualnie 
zajêta przez s³owo &quot;piotr&quot;. Problemom kolizji po¶wiêcimy wiêcej uwagi w dalszej 
czê¶ci wyk³adu.&nbsp; </font><font face="Wingdings">J</font></p>





<p>Przy za³o¿eniu, ¿e zbiór elementów nie jest du¿y i ¿e klucze tych elementów 
s± liczbami naturalnymi {0,1,...,m} i rozró¿niaj± elementy, zbiór dynamiczny 
mo¿emy reprezentowaæ za pomoc± zwyk³ej tablicy, umieszczaj±c elementy na 
pozycjach wskazanych przez klucze. Taka reprezentacja zbioru dynamicznego nazywa 
siê adresowaniem bezpo¶rednim. Po prostu, element o kluczu 2 jest umieszczony 
bezpo¶rednio na pozycji drugiej tablicy, albo znajduje siê tam referencja do 
tego elementu. Operacje insert, delete, member, struktury s³ownika, mo¿na&nbsp; 
w takim modelu zaimplementowaæ bardzo prosto sprawdzaj±c zawsze najpierw pozycjê 
wskazan± przez klucz. Koszt tych operacji jest wiêc sta³y. </p>





<p>Metody haszowania s± stosowane zwykle wtedy, gdy zbiory skoñczone, które 
chcemy reprezentowaæ s± niedu¿e, ale&nbsp; uniwersum, z którego pochodz±, jest 
bardzo du¿e i nie wchodzi w grê adresowanie bezpo¶rednie. 
Je¶li zbiór elementów E sk³ada siê ze wszystkich co najwy¿ej piêcioelementowych 
s³ów, a zbiory X z którymi mamy rzeczywi¶cie do czynienia nie s± wiêksze ni¿ 13, 
to nie ma sensu tworzyæ tablicy&nbsp; o (26<sup><font face="Verdana">6</font></sup>-1)/25 
pozycjach (dla ka¿dego elementu zbioru E osobna pozycja), nawet gdyby to by³o 
mo¿liwe, bo taka tablica by³aby prawie pusta. Wystarczy nam tablica 13 
elementowa i rozs±dny sposób umieszczania elementów w tej tablicy, tak by nie 
trzeba by³o jej za ka¿dym razem przegl±daæ w ca³o¶ci. Musimy wiêc umieæ przypisaæ elementom konkretnego zbioru X pozycjê 
w tej tablicy.</p>





<p>Ogólnie, niech E bêdzie uniwersum kluczy, a m przewidywanym rozmiarem 
podzbioru X u¿ywanych przez nas kluczy, przy czym&nbsp; m &lt; |E|. Funkcj± 
mieszaj±c± (lub haszuj±c±) nazywamy dowoln± funkcjê z E w {1,..., m} </p>





<p style="text-align: center">h : E <span lang="en"><font face="Symbol">&reg;</font></span> 
{1,...,m}.&nbsp;  </p>





<p>Tablica z haszowaniem jest uogólnieniem zwyk³ej tablicy. Jest to para (T, h), gdzie T jest tablic± o m elementach,&nbsp; h jest funkcj± haszuj±c± 
tak±, ¿e h(e) jest tzw. pierwszym adresem elementu e w 
tablicy T. Warto¶æ h(e) jest u¿ywana zawsze wtedy, gdy chcemy sprawdziæ, czy element e 
nale¿y do&nbsp; zbioru&nbsp; reprezentowanego przez tablicê haszuj±c±, gdy 
chcemy do³±czyæ do zbioru nowy klucz, lub gdy chcemy usun±æ klucz. Zatem wybór funkcji haszuj±cej ma znaczenie podstawowe. Zale¿y nam na tym, by taka 
funkcja równomiernie rozrzuca³a elementy uniwersum E w tablicy o m elementach, 
tzn. aby liczba tych elementów uniwersum E, którym funkcja h przypisuje ten sam 
adres, odpowiada³a stosunkowi |E|/m. W terminologii rachunku prawdopodobieñstwa, 
chcemy aby dla wszystkich x, P(h(x)=i) = 1/m. S± wtedy du¿e szanse, ¿e nie zdarzy 
siê sytuacja, w której dwa ró¿ne elementy zbioru X, którego rozmiar 
oszacowali¶my z góry przez m, maj± ten sam adres w tablicy haszuj±cej.&nbsp; 
Mówimy, ¿e wyst±pi³a wtedy kolizja.</p>





<p>Oczywi¶cie, je¶li funkcja mieszaj±ca jest ró¿nowarto¶ciowa na interesuj±cym 
nas zbiorze kluczy, to problem kolizji nie wyst±pi. Niestety, nigdy nie mamy gwarancji, ¿e nie zdarzy siê kolizja. Z<span lang="en-us">a</span>nim 
przyst±pimy do rozwa¿<span lang="en-us">a</span>ñ,<span lang="en-us"> </span>jak 
rozwi±zaæ<span lang="en-us"> problem kolizji,</span> przedstawimy przyk³ady 
funkcji haszuj±cych.</p>





<p><b>Pytanie 4</B>: Jakie jest prawdopodobieñstwo, ¿e dana jednorodna funkcja 
haszuj±ca, h : {1,...n} <span lang="en"><font face="Symbol">&reg;</font></span>{1,...m},&nbsp; 
jest ró¿nowarto¶ciowa?   </P>

<!-- <p>Odpowied¼: m(m-1)....(m-n+1)/ m<sup><font face="Verdana">n</font></sup>.&nbsp;</P> -->

<form>
<p>
<INPUT class="GUZIK" TYPE='button' VALUE='Zobacz odpowied¼' NAME='Klik0' 
onClick="napis(this.form,' m(m-1)....(m-n+1)/ m^n')">
</p>
</form>
<p><br clear="all"><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr>
<td align="left"><A HREF="main10_p3.html" TARGET="main"  class="NAWIGACJA">&#171;&nbsp;poprzedni punkt</a>&nbsp;</td>
<td align="right">&nbsp;<A HREF="main10_p5.html" TARGET="main" class="NAWIGACJA">nastêpny punkt&nbsp;&#187;</a></td></tr></table><!--/td-->
<!--/tr-->
<!--/table-->
</body>
</html>