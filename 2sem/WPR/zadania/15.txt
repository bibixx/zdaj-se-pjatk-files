package jbPack;

import javax.swing.*;
import java.awt.*;

import java.awt.event.*;
import java.io.*;
import java.util.*;
import java.text.*;

import java.awt.geom.*;
import java.awt.image.*;
import java.awt.font.*;
import java.net.*;
import java.util.zip.*;
import java.lang.reflect.*;
import java.applet.*;

import javax.swing.event.*;
import javax.swing.border.*;
import javax.swing.tree.*;
import java.beans.*;

public
class Program
    extends JFrame {

    private static final
        String caption = "Swing Application";  // tytu3

    public static final
        int width = 400, height = 400;         // rozmiary

    public static final
        Point location = new Point(150, 150);  // po3o?enie

    private String lookAndFeel =               // wygl1d
        UIManager.getSystemLookAndFeelClassName();

    private Object paintLock = new Object();
    private boolean isScreenVisible;

    private ContentPane contentPane;

    public static void main(String[] args)
    {
        new Program();
    }

    public Program()
    {
            // okreolenie napisu na pasku tytu3owym
        setTitle(caption);

           // uniemo?liwienie zmiany rozmiarów okna
        setResizable(false);

            // okreolenie wygl1du aplikacji
        try {
            UIManager.setLookAndFeel(lookAndFeel);
        }
        catch(Exception e) {
        }

            // utworzenie odnoonika do pulpitu
        contentPane = new ContentPane();

            // wymiana domyolnego pulpitu na w3asny
        setContentPane(contentPane);

            // okreolenie po3o?enia okna
        setLocation(location);

            // okreolenie rozmiarów pulpitu
        JComponent jContent = (JComponent)contentPane;
        String system = System.getProperty("os.name");
        int delta = system.indexOf("98") > -1 ||
                    system.indexOf("95") > -1 ? 0 : 2;
        jContent.setPreferredSize(
            new Dimension(width-delta, height-delta)
        );

            // okreolenie koloru t3a okna i pulpitu
        setBackground(Color.white);
        contentPane.setBackground(Color.white);

            // obs3uga zamkniecia okna
        addWindowListener(
            new WindowAdapter() {
                public void
                windowClosing(WindowEvent evt)
                {
                    System.exit(0);
                }
            }
        );

            // upakowanie okna
        pack();

            // zrealizowanie Naczelnej Zasady
        SwingUtilities.invokeLater(
            new Runnable() {
                public void run()
                {
                        // wykonanie czynnooci inicjuj1cych
                    contentPane.initPane();

                        // wyowietlenie okna i pulpitu
                    show();
                }
            }
        );

        synchronized(paintLock) {
            while(!isScreenVisible)
                try {
                    paintLock.wait();
                }
                catch(InterruptedException e) {}
        }

            // zrealizowanie Naczelnej Zasady
        SwingUtilities.invokeLater(
            new Runnable() {
                public void run()
                {
                        // nastawienie celownika na pulpit
                    contentPane.requestFocus();

                        // nastawienie celownika na komponent
                        // albo m.in. wykonanie dispose();
                    contentPane.initFocus();
                }
            }
        );
    }

        // klasa pomocnicza
    class Content
        extends JPanel {

        void initPane()  {}
        void initFocus() {}

        public void paintComponent(Graphics gDC)
        {
            super.paintComponent(gDC);

            synchronized(paintLock) {
                isScreenVisible = true;
                paintLock.notify();
            }
        }
    }

// ====== pod-aplikacja ================================= //

    public
    class ContentPane
        extends Content {

        public void initPane()
        {
        }

        public void paintComponent(Graphics gDC)
        {
            super.paintComponent(gDC);
            String str = "";
            int j=0;
            int[][] dane= new int [1][3];
            int[][] daneTemp= new int [1][3];
            String hoj="";
            try{
                FileReader fr= new FileReader("d:\\opis.txt");
                BufferedReader br = new BufferedReader(fr);
                hoj= br.readLine();
                while(hoj!=null){
                    int czy=0;
                    str="";
                    str+=hoj;
                    StringTokenizer st2 = new StringTokenizer(str);
                    String spr="";
                    int ile = st2.countTokens();
                    for(int i=0; i<ile; i++){
                        spr=st2.nextToken();
                        for(int l=0; l<spr.length(); l++){
                            if(spr.charAt(l)<'0' || spr.charAt(l)>'9'){
                                czy=1;
                            }
                        }
                    }
                    StringTokenizer st = new StringTokenizer(str);
                    if(st.countTokens()==3 && czy==0 ){
                        for(int i=0; i<3; i++){
                            dane[j][i]=Integer.parseInt(st.nextToken());
                        }
                        j++;
                    }
                    hoj=br.readLine();
                    daneTemp = dane;
                    dane = new int[j+1][3];
                    for(int l=0; l<j ; l++){
                        for(int i=0; i<3 ; i++){
                            dane[l][i] = daneTemp[l][i];
                        }
                    }
                }
            }catch(IOException ex){}
           // for(int l=0;l<dane.length-1;l++){
           //     for(int i=0; i<3; i++){
          //          System.out.print(dane[l][i]+" ");
            //    }
        //        System.out.println();
    //            gDC.drawOval(dane[l][0],dane[l][1],dane[l][2],dane[l][2]);
      //      }
  //          
        Kolo k = new Kolo (1,2,3);
        }
    }
    abstract class Figura{
        protected int x,y;
        protected String fig = "Jeszcze nie wiadomo";
        public Figura(){
            this.x=0;
            this.y=0;
        }
        public Figura (int x, int y){
            this.x=x;
            this.y=y;
        }
        public void pokaz() {
            System.out.println(fig);
            System.out.println("Jej po³o¿enie to: "+x+", "+y);
        }
        public abstract void pozycja(int x, int y);
    }    
    
    class Kolo extends Figura {
        
        private int promien;
        public Kolo(int x, int y, int r){
            this.x=x;
            this.y=y;
            promien=r;  
            fig="Jest to ko³o";
        }
        public void rysuj(Graphics gDC){
            gDC.drawOval(x,y,promien,promien);    
        }
        public void pokaz(){
            super.pokaz();
            System.out.println("Jej promieñ to: "+promien);
        }
    }
// ====================================================== //

}

