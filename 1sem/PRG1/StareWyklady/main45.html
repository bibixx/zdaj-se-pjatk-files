<!DOCTYPE HTML PUBLIC "-//W3C//DTD html 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="pragma" content="no-cache">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
<meta http-equiv="Content-Language" content="pl">
<title></title>
<meta name="Keywords" content="s³owa kluczowe">
<meta name="Description" content="">
<LINK REL="stylesheet" TYPE="text/css" HREF="main.css">
<script language="JavaScript" src="skrypty.js" type="text/javascript"></script>
</head>
<body bgcolor="white" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<table width="100%" cellspacing="4" cellpadding="4" border="0">
<tr>
    <td><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td align="left"><A HREF="index44.html" TARGET="_top"  class="NAWIGACJA">&#171;&nbsp;poprzedni punkt</a>&nbsp;</td></tr></table><br clear="all"><A NAME="EDU.wyklad.punkt 3"></A><div class="tytulpunktu">3. Praktyczne przyk³ady</div>

<a name="W6.3"></a>

<p>Omawianie skomplikowanego tematu obiektów i referencji warto zakoñczyæ kilkoma
przyk³adami o nieco bardziej praktycznym charakterze, pokazuj±cymi jednocze¶nie,
¿e<A NAME="EDU.skorowidz.termin null 45_422"></A> s³owo kluczowe null bardzo w programowaniu siê przydaje, a referencja
do pustego ³añcucha znakowego jest czym¶ innym ni¿ zmienna typu String, która
nie wskazuje na ¿aden obiekt. <br>

Przy okazji poznamy wstêpnie pewne  mo¿liwo¶ci<A NAME="EDU.skorowidz.termin interakcja_z_programem 45_423"></A> interakcji z programem: wprowadzanie danych w<A NAME="EDU.skorowidz.termin dialog_wej¶ciowy 45_424"></A> dialogu wej¶ciowym oraz pokazywania
komunikatów<A NAME="EDU.skorowidz.termin dialog_komunikatów 45_425"></A> w dialogu komunikatów, a tak¿e sposób uzyskiwania ze znakowej
(napisowej) reprezentacji liczby ca³kowitej - jej binarnej (wewnêtrznej)
warto¶ci, na której mo¿na wykonywaæ operacje arytmetyczne.<br>
<br>
Zapis w programie:<br>
<br>
   <A NAME="EDU.skorowidz.termin JOptionPane.showInputDialog 45_426"></A> String s = JOptionPane.showInputDialog("Komunikat");<br>
<br>
spowoduje otwarcie okienka dialogowego z komunikatem "Komunikat", w którym
bêdzie mo¿na wprowadziæ jaki¶ tekst. Po klikniêciu w przycisk Ok wprowadzony
³añcuch znakowy bêdzie dostêpny za pomoc± zmiennej s. Zamkniêcie dialogu (np.
przyciskiem Cancel) spowoduje, ¿e zmienna s bêdzie mia³a warto¶c null.<br>
<br>
Zapis:<br>
<br>
   <A NAME="EDU.skorowidz.termin JOptionPane.showMessageDialog 45_427"></A> JOptionPane.showMessageDialog(null, "Komunikat");<br>
<br> poka¿e okno dialogowe z komunikatem "Komunikat" (w tym zapisie null
mówi m.in. o tym, ¿e okno dialogowe ma byæ wycentrowany w obszarze pulpitu graficznego
interfejsu systemu operacyjnego; zamiast null mo¿na podaæ referencjê do obiektu-okna
- innego od pulpitu)<br>
<br>
Aby korzystaæ z tych mo¿liwo¶ci trzeba w pierwszym wierszu programu wpisaæ:
import javax.swing.JOptionPane; (dziêki temu bêdzie mo¿na u¿yæ<A NAME="EDU.skorowidz.termin JOptionPane 45_428"></A> nazwy JOptionPane,
która jest nazw± klasy).<br>
<br>
Co konkretnie oznaczaj± te zapisy (oraz "import") dowiemy siê w nastêpnych wyk³adach, a szczegó³y
stosowania dialogów poznamy (niestety dopiero) w drugim semestrze.<br>
Teraz istotne jest tylko to, ¿e (mo¿e jeszcze nie bardzo wiedz±c o co chodzi)
bêdziemy mogli komunikowaæ siê w (w miarê) wygodnej formie z naszymi programami.<br>
<br>
Pierwszy przyk³adowy program jest kolejn± wariacj± na temat "Hello world" czy "Dzieñ dobry".<br>

<pre>
import javax.swing.JOptionPane;

public class GreetMsg {

  public static void main(String[] args) {

    String name = JOptionPane.showInputDialog("Podaj swoje imiê");
    if (name == null) name = "";
    JOptionPane.showMessageDialog( null, "Witaj " + name + "!");
    System.exit(0);

  }

}
</pre>

<p>
<img src="images/w6greet.jpg" alt="Rys" width="293" hspace="15" height="119" border="1" align="Right">Uwidoczni on dialog wej¶ciowy, w którym bêdziemy mogli wprowadziæ tekst.

Gdy po wpisaniu tekstu klikniemy "Ok", to zmienna name bêdzie wskazywaæ na
napis, który wprowadzili¶my w dialogu. Je¶li natomiast  zamkniemy dialog,
albo klikniemy "Cancel", to wynikiem odwo³ania JOptionPane.showInputDialog(...)
bêdzie null i tê w³a¶nie warto¶æ bêdzie miala zmienna name (oc oznacza, ¿e
nie wskazuje na ¿aden ³añcuch znakowy).
</p>
<br clear="all">

<p>W takim przypadku przypiszemy jej referencjê do pustego ³añcucha znakowego "".<br><br>

<p>
<img src="images/w6greet2.jpg" alt="Rys" hspace="15" width="268" height="113" border="1" align="Right">
Nastêpnie odwo³anie JOptionPane.showMessageDialog(..) poka¿e komunikat z powitaniem (z podanym imieniem lub bez). 
</p>
<br clear="all">

<br>

<p>Ciekawe, co by siê sta³o, gdyby usun±æ z programu instrukcjê if (...) i pozwoliæ
na to, by przy zamkniêciu dialogu przez Cancel zmienna name miala warto¶c
null.<br>
No, có¿ dostaliby¶my niezbyt grzeczny komunikat "Witaj null!" ( konkatenacja przekszta³ca warto¶æ <i><b>null</b></i> na napis null).<br>
Ale problem nie w grzeczno¶ci.<br>
<br>
Gdyby¶my dodali na koñcu programu instrukcjê wyprowadzaj±c± na konsolê d³ugo¶æ
³añcucha znakowego, wskazywanego przez name (tê d³ugo¶æ mo¿emy uzyskaæ pytaj±c
o ni± obiektu za pomoc± polecenia length()):<br>
<br>
System.out.println("d³ugo¶æ: " + name.length());<br>
<br>
to w przypadku usuniêcia instrukcji if powsta³by b³±d wykonania, gdy zmienna name mia³aby warto¶æ null. <br>
Istotnie pytaliby¶my wtedy niestniej±cego obiektu  o d³ugo¶æ napisu w nim zawartego.<br>
Pozostawiaj±c if - gwarantujemy, ¿e name bêdzie wskazywac zawsze na jaki¶
obiekt. Gdy nie podano ¿adnego tektsu w dialogu lub wybrano Cancel - bêdzie
to pusty ³añcuch znakowy. O d³ugo¶ci 0. W uzupe³nionym programie uzyskamy wtedy na konsoli komunikat: d³ugo¶æ 0.<br>
<br><A NAME="EDU.skorowidz.termin ³añcuch_znakowy pusty 45_429"></A> 

<div class="important">Pusty ³añcuch znakowy (nie zawieraj±cy ¿adnego znaku) jest takim samym
obiektem jak ka¿dy inny ³añcuch znakowy. Nale¿y odró¿niaæ pusty ³añcuch znakowy
(o d³ugo¶ci 0) od warto¶ci null. Zmienna typu String, która ma warto¶æ null
nie wskazuje na ¿aden obiekt. Wtedy nie mo¿emy jej u¿ywaæ do posy³ania poleceñ
do obiektu.  Zmienna ta mo¿e jednak wskazywaæ na obiekt - pusty ³añcuch znakowy
i wtedy mo¿emy wobec niego stosowaæ metody (polecenia) zdefiniowane w klasie
String.

</div>
<br>

<p>
<img src="images/w6mldlg.jpg" alt="Rys" hspace="15" width="268" height="208" border="1" align="Right">
Drugi program przyk³adowy ³±czy wprowadzane w kolejno (w pêtli) pojawiaj±cych
siê dialogach teksty w taki sposób, by pokazaæ je w dialogu jako komunikat
sk³adaj±cy siê z wielu wierszy (ka¿dy wprowadzony tekst = jeden wiersz komunikatu).<br>

Wprowadzanie koñczy siê i wynikowy komunikat zostaje uwidoczniony tylko wtedy,
gdy u¿ytkownik zamkn±³ (np. przez  Cancel)  dialog wej¶ciowy. Program nie
pozwala do³±czyæ do zbioru tekstów pokazywanytych w dialogu wynikowym pustego
³añcucha znakowego. Je¿eli u¿ytkownik nic nie wpisa³ w dialogu wej¶ciowym
(inp.equals("") zwraca true), to program przypomina o konieczno¶ci wprowadzenia
tekstu (lub zrezygnowania z wprowadzania przez Cancel). Na rysunku obok pokazano
wynik dzia³ania programu po wprowadzeniu w kolejnych dialogach kilku nazw
zwierz±t.
</p>
<br clear="all">

<pre>
import javax.swing.JOptionPane;

public class ShowStrings {

  public static void main(String[] args) {

    String out = "";
    String inp = null;

    while ( (inp = JOptionPane.showInputDialog( "Wpisz co¶" )) != null) {
      if (inp.equals(""))
         JOptionPane.showMessageDialog( null,
                                       "Podaj dane lub zamknij dialog"
                                      );
      else out = out + '\n' + inp;
    }

    if (out.equals("")) out = "Nie wprowadzono ¿adnych danych";
    JOptionPane.showMessageDialog(null, out);
    System.exit(0);

  }

}
</pre>

<p>Warte podkre¶lenia:<br>
<ul>
  <li>w warunku while wykorzystano fakt, ¿e przypisanie jest wyra¿eniam o
warto¶ci lewej strony; przy tym jednak trzeba by³o uwzglêdniæ niski priorytet
operatora = i dlatego przypisanie jest ujête w nawiasy</li>

  <li>kolejne wiersze wynikowego komunikatu uzyskiwane s± przez przy³±czenie znaku '\n' (przej¶cie do nowego wiersza)</li>

  <li>porównanie zawarto¶ci ³añcuchów znakowych - zawsze za pomoc± equals</li>
</ul>

<p><A NAME="EDU.skorowidz.termin System.exit(0) 45_430"></A> W obu programach zastosowano na koñcu odwo³anie System.exit(0). Powoduje
ono zakoñczenie dzia³ania programu (z podanym kodem wynikowym - w tym przypadku
0).<br>
<br>
Normalnie program w Javie koñczy swoje dzia³anie, gdy zostan± wykonane wszystkie
instrukcje w metodzie main. Nie jest to jednak prawd±, je¶li w programie
korzystamy z elementów graficznego interfejsu u¿ytkownika (powody tego zostan±
wyja¶nione pó¼niej). Poniewa¿ dialogi pokazywane przez showXXXDialog s± elementami
GUI, to trzeba by³o jawnie zakoñczyæ dzia³anie programu przez System.exit(...).<br>
<br><A NAME="EDU.skorowidz.termin wprowadzanie_liczb 45_431"></A> A jak<A NAME="EDU.skorowidz.termin liczby wprowadzanie 45_432"></A> wprowadziæ do programu liczby?<br>
Gdy w polu tekstowym okna dialogowego wpiszemy jak±¶ liczbê, to bêdzie ona
w programie dostêpna jako napis (³ancuch znakowy, String). Oczywi¶cie nie
mo¿emy na takim napisie wykonywaæ operacji arytmetycznych.<A NAME="EDU.skorowidz.termin liczba przekszta³cenie_reprezentacji_znakowej_do_postaci_binarnej 45_433"></A> Do tego potrzebne
jest przekszta³cenie znakowej (napisowej) reprezentacji liczby do postaci
binarnej (takiej, w jakiej liczby s± zapisywane w pamiêci komputera).<br>
<br><A NAME="EDU.skorowidz.termin Integer.parseInt 45_434"></A> 
<div class="syntax">Do przekszta³cania napisów na liczby ca³kowite mo¿na wykorzystaæ nastêpuj±ce odwo³anie:<br>
<br>
            liczba = Integer.parseInt(napis);<br>
<br>
gdzie:<br>
        liczba - jest dowoln± zmienn± typu int,<br>
        napis  - jest wyra¿eniem typu String.<br>
<br>
</div>

<br>
<p>
Oczywi¶cie, nie ka¿dy napis reprezentuje liczbê ca³kowit±. Je¶li np. w napisie
znajdzie siê znak litery lub kropka dziesiêtna, to przy próbie przekszta³cenia
napisu na liczbê ca³kowit± wyst±pi b³±d. W Javie taki b³±d sygnalizowany
jest za pomoca wyj±tku, który nazywa siê<A NAME="EDU.skorowidz.termin NumberFormatException 45_435"></A> NumberFormatException.<br>
Dopóki (w ostatnim wyk³adzie) nie poznamy mechanizmu obs³ugi b³êdów (wyj±tków)
musimy siê liczyæ z tym, ¿e w takim przypadku wykonanie programu zostanie
przerwane.<br>
<br>
Przyk³ad: program sumuj±cy dwie wprowadzone w dialogach liczby.<br>
<br>

<pre>
import javax.swing.*;

public class ParseInt {

  public static void main(String[] args) {

    String s1 = JOptionPane.showInputDialog("Podaj pierwsz± liczbê");
    String s2 = null;
    if (s1 != null) {
      s2 = JOptionPane.showInputDialog("Podaj drug± liczbê");
      if (s2 != null) {
         int l1 = Integer.parseInt(s1);
         int l2 = Integer.parseInt(s2);
         JOptionPane.showMessageDialog(null, "Suma: " + (l1 + l2));
      }
    }

    System.exit(1);
  }

}
</pre>


<p>Proszê wypróbowaæ powy¿szy program przy ró¿nych danych wej¶ciowych, m.in.
takich które nie stanowi± napisów reprezentuj±cych liczby ca³kowite (w tym
- przy pustym ³añcuchu znakowym, który zostanie wprowadzony, gdy wybierzemy
w dialogu Ok, nie wpisuj±c nic do jego pola tekstowego).</p><br clear="all"><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td align="left"><A HREF="index44.html" TARGET="_top"  class="NAWIGACJA">&#171;&nbsp;poprzedni punkt</a>&nbsp;</td></tr></table></td>
</tr>
</table>
</body>
</html>
