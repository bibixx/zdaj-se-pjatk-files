<!DOCTYPE HTML PUBLIC "-//W3C//DTD html 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="pragma" content="no-cache">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
<meta http-equiv="Content-Language" content="pl">
<title></title>
<meta name="Keywords" content="s³owa kluczowe">
<meta name="Description" content="">
<LINK REL="stylesheet" TYPE="text/css" HREF="main.css">
<script language="JavaScript" src="skrypty.js" type="text/javascript"></script>
</head>
<body bgcolor="white" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<table width="100%" cellspacing="4" cellpadding="4" border="0">
<tr>
    <td><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td align="left"><A HREF="index97.html" TARGET="_top"  class="NAWIGACJA">&#171;&nbsp;poprzedni punkt</a>&nbsp;</td><td align="right">&nbsp;<A HREF="index99.html" TARGET="_top" class="NAWIGACJA">nastêpny punkt&nbsp;&#187;</a></td></tr></table><br clear="all"><A NAME="EDU.wyklad.punkt 2"></A><div class="tytulpunktu">2. Rozbiór tekstów</div>

<a name="W12.2"></a><A NAME="EDU.skorowidz.termin rozbiór_tekstów 98_676"></A> 
<p>Bardzo czêsto w programowaniu wystêpuj± sytuacje, gdy trzeba rozbiæ, roz³o¿yæ
jaki¶ tekst (napis) na poszczególne wystêpuj±ce w nim symbole (np. s³owa).<br>
<br>

Wyobra¼my sobie np., ¿e<A NAME="EDU.skorowidz.termin ³añcuch_znakowy 98_677"></A> ³añcuch znakowy zawiera napisy reprezentuj±ce liczbê
ca³kowit±, dowoln± liczbê spacji,  znak operacji arytmetycznej, dowoln± liczbê
spacji i napis reprezentuj±cy drug± liczbê c³akowit±. Naszym zadaniem jest
"wy³uskanie" z ca³ego napisu napisów-liczb, przekszta³cenie ich do postaci
binarnej  i wykonanie na nich podanej operacji.<br>
<br>
<p>
<img src="images/symbole.jpg" alt="r" hspace="15" width="195" height="158" border="1" align="Right">

Napis taki mo¿e wygl±daæ nastêpuj±co: "21 + 21"<br>
<br>

Wy³uskiwane symbole s± rozdzielone <b>separatorami</b>.
</p>
<br clear="all">
<br>
<p>
W przyk³adzie z liczbami separatorami bêd± spacje.<br>

Dowolny ci±g znaków, który nie zawiera spacji - bêdzie symbolem.<br>

Dowolna liczba spacji bêdzie oddzielaæ symbole od siebie.<br>
<br>

<div class="syntax"><br>

Do wy³uskiwania symboli  z ³añcuchów znakowych s³u¿y klasa StringTokenizer z pakietu java.util.<br>

</div>

<br>
<p>

Po to by dokonaæ rozbioru tekstu - tworzymy obiekt klasy StringTokenizer,
podaj±c jako argument konstruktora - tekst do rozbioru np.<br>
<br>

<pre>
String expr = "21 + 21";
StringTokenizer st = new StringTokenizer(expr);
</pre>

<p>
Ta postaæ konstruktora zak³ada domy¶lnie, ¿e separatorami s± znaki z nastêpuj±cego zestawu <code>" \t\n\r\f"</code>
 (czyli znak spacji, tabulacji, przej¶cia do nowego wiersza, powrotu karetki,
nowej strony). W tym przypadku symbolami bêd± ci±gi znaków, które nie zawieraj±
¿adnego z wymienionych separatorów.<br>
<br>

Obiektu klasy StringTokenizer mo¿emy teraz zapytaæ o to ile symboli zawiera przekazany konstruktorowi napis:<br>
<pre>

<p>
int n = st.countTokens();  // n = 3</pre>

<p>

Wy³uskiwanie symboli odbywa siê sekwencyjnie poczynaj±c od pocz±tku ³añcucha. S³u¿y temu metoda <b>nextToken()</b>, która zwraca kolejny symbol jako String. Pierwsze wywo³anie tej metody
zwróci pierwszy symbol, nastêpne - bêd± zwracaæ kolejne symbole ³añcucha.
<br>

<pre>
String s1 = st.nextToken(); // napis "21"
String s2 = st.nextToken(); // napis "+"
String s3 = st.nextToken(); // napis "21"
</pre>

<p>
Gdy nie ma ju¿ symboli "do zwrotu" - wywo³anie nextToken() spowoduje powstanie<A NAME="EDU.skorowidz.termin NoSuchElementException 98_678"></A> wyj±tku NoSuchElementException.<br>
<br>

Zatem zawsze przegl±damy ³añcuch od pocz±tku i  "wy³uskuj±c" symbole przesuwamy
siê do jego koñca (uwaga: kolejne symbole s± zwracane, ale oczywi¶cie - nie
s± usuwane z ³añcucha).<br>
<br>

Do stwierdzenia, czy w ³añcuchu znakowym s± jeszcze symbole do zwrotu s³u¿y metoda hasMoreTokens().<br>

Metoda hasMoreTokens() zwraca true, je¶li w ³añcuchu znakowym s± jeszcze
nie "wyluskane" symbole i false w przeciwnym razie. Inaczej mówi±c: hasMoreTokens()
zwraca true, je¶li nastêpne odwo³anie do nextToken() zwróci kolejny symbol
i zwraca false, gdy ew. nastêpne odwo³anie do nextToken() spowoduje wyj±tek
NoSuchElementException.<br>
<br>

£atwo zapisaæ pêtle, w której bêdziemy pobieraæ kolejne symbole:

<pre>
while (st.hasMoreTokens()) {
  Sring s = st.nextToken();
  // ... tu co¶ robimy z s
}
</pre>

<p>

Wiedz±c to wszystko mo¿na teraz napisaæ program, który w oknie dialogowym
prosi u¿ytkownika o wprowadzeia liczby c±³kowitej, spacji, operatora, spacji
i drugiej liczby i wykonuje ¿±dan± operacjê arytmetyczn± na tych dwóch liczbach.<br>
<br>

<div class="important"><br>
Przed lektur± dalszego tekstu proszê to zadanie rozwi±zaæ samodzielnie
<br>
<br>



</div>

<br>
<p>

Rozwi±zanie:<br>
<br>
<pre>
import java.util.*;
import javax.swing.*;

public class Oper {

  public static void main(String[] args) {

    String normalQuest = "Liczba1 op Liczba2",
           errorQuest = "Wadliwe dane. Jeszcze raz.\n" + normalQuest,
           quest = normalQuest;

    String expr;

    while ((expr = JOptionPane.showInputDialog(quest)) != null) {

      StringTokenizer st = new StringTokenizer(expr);

      if (st.countTokens() != 3) {
          quest = errorQuest;
          continue;
      }

      String snum1 = st.nextToken(),
             sop  = st.nextToken(),
             snum2 = st.nextToken();

      int num1 = Integer.parseInt(snum1),
          num2 = Integer.parseInt(snum2),
          res = 0;

      char op = sop.charAt(0);

      switch (op) {
        case '+' : res = num1 + num2; break;
        case '-' : res = num1 - num2; break;
        case '*' : res = num1 * num2; break;
        case '/' : res = num1 / num2; break;
        default: {
          quest = errorQuest;
          continue;
        }
      }
      JOptionPane.showMessageDialog(null, "Wynik = " + res);
      quest = normalQuest;
    }
    System.exit(0);

  }

}
</pre>

<p>

Inna postaæ<A NAME="EDU.skorowidz.termin StringTokenizer 98_679"></A> konstruktora klasy StringTokenizer pozwala na okre¶lenie zbioru
separatorów, które bêd± s³u¿yæ do wyró¿niania symboli.<br>

Je¿eli napiszemy np.<br>
<br>

StringTokenizer st = new StringTokenizer(s, "., " - to separatorami bêd± kropka, przecinek i spacja.<br>
<br>

Zadanie:<br>
 Stworzyæ klasê Words, której obiekty bêd± zawieraæ tablicê
s³ów napisu przekazanego jako argument konstruktora. Za s³owa uznajemy ci±gi
znaków rozdzielonych spacjami i znakami punktuacji (oraz mo¿e innymi - zastanowiæ
siê jakimi).<br>

W klasie dostarczyæ metod:<br>

getWordsCount() - zwraca liczbê s³ów<br>

getWord(int i) - zwraca i-te s³owo napisu (i =1,2, ... n; gdzie n liczba s³ów w napisie)<br>

getWords() - zwraca tablicê s³ów<br>

getMaxLenWord() - zwraca najd³u¿sze s³owo<br>

getMinLenWord() - zwraca najkrótsze s³owo<br>
<br>

<div class="important"><br>
Przed lektur± dalszego tekstu proszê to zadanie rozwi±zaæ samodzielnie
<br>
<br>




</div>

<br>
<p>

Mo¿liwe rozwi±zanie:<br>
<br>

<pre>
import java.util.*;

public class Words {

  private String[] words;      // tablica slów
  private String maxLenWord;   // s³owo o max d³ugo¶ci
  private String minLenWord;   // s³owo o minimalnej d³ugo¶ci

  // Konstruktro
  public Words(String txt) {

    // Uwzglêdniamy bogaty zestaw separatorów s³ów

    StringTokenizer st = new StringTokenizer(txt, " \t\n\r\f.,:;()[]\"'?!-{}");

    words = new String[st.countTokens()];  // utworzenie tablicy s³ów
    int maxL = 0;                          // max dlugo¶æ
    int minL = 10000;                      // min d³ugo¶æ
    int i = 0;                             // indeks w tablicy

    while (st.hasMoreTokens()) {   // dopóki s± s³owa
      String s = st.nextToken();
      int len = s.length();
      if (len &gt; maxL) {            // maksymalna d³ugo¶æ ?
         maxL = len;
         maxLenWord = s;
      }
      if (len &lt; minL) {            // minimalna d³ugo¶æ ?
        minL = len;
        minLenWord = s;
      }
      words[i++] = s;              // s³owo -&gt; do tablicy; zwiêkszenie indeksu
    }
  }

  // Zwraca liczbê s³ów
  public int getWordsCount() {
    return words.length;
  }

  // Zwraca i-te s³owo (liczymy od 1)
  // je¶li podano wadliwy indeks - zwraca null
  public String getWord(int i) {
    return (i &lt; 1 || i &gt; words.length) ? null : words[i-1];
  }

  // Zwraca tablicê slów
  public String[] getWords() {
    return words;
  }

  // Zwraca s³owo o max d³ugo¶ci
  public String getMaxLenWord() {
    return maxLenWord;
  }
  // Zwraca s³owo o min d³ugo¶ci
  public String getMinLenWord() {
    return minLenWord;
  }


}
</pre>

<p>

I klasa testuj±ca:<br>
<br>

<pre>
import javax.swing.*;

class TestWords {

  public static void main(String[] args) {
    String txt;
    while ((txt = JOptionPane.showInputDialog("Wpisz tekst")) != null) {
      Words w = new Words(txt);
      int n = w.getWordsCount();
      say("Liczba s³ów: " + n);
      say("Kolejne s³owa: ");
      for (int i=1; i &lt;= n; i++) say(w.getWord(i));
      say("S³owo o numerze n+1: " + w.getWord(n+1));
      say("Kolejne s³owa: ");
      String[] wrds = w.getWords();
      for (int i=0; i &lt; wrds.length; i++) say(wrds[i]);
      say("Najdlu¿sze s³owo: " + w.getMaxLenWord());
      say("Najkrótsze s³owo: " + w.getMinLenWord());
    }
    System.exit(0);
  }

  static void say(String s) {
    System.out.println(s);
  }

}
</pre>

<p><A NAME="EDU.skorowidz.termin StringTokenizer 98_680"></A> Klasa StringTokenizer dostarcza programi¶cie jeszcze pewnych dodatkowych
mo¿liwo¶ci (np. zmianê separatorów pomiêdzy kolejnymi operacjami wy³uskiwania
symboli;  zwracanie nie tylko symboli, ale i separatorów w wyniku odwo³ania
nextToken()).<br>
<br>
<b><font color="#ff6600">Proszê zapoznaæ siê z dokumentacj± klasy StringTokenizer</font></b>.</p><br clear="all"><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td align="left"><A HREF="index97.html" TARGET="_top"  class="NAWIGACJA">&#171;&nbsp;poprzedni punkt</a>&nbsp;</td><td align="right">&nbsp;<A HREF="index99.html" TARGET="_top" class="NAWIGACJA">nastêpny punkt&nbsp;&#187;</a></td></tr></table></td>
</tr>
</table>
</body>
</html>
