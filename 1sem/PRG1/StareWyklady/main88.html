<!DOCTYPE HTML PUBLIC "-//W3C//DTD html 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="pragma" content="no-cache">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
<meta http-equiv="Content-Language" content="pl">
<title></title>
<meta name="Keywords" content="s³owa kluczowe">
<meta name="Description" content="">
<LINK REL="stylesheet" TYPE="text/css" HREF="main.css">
<script language="JavaScript" src="skrypty.js" type="text/javascript"></script>
</head>
<body bgcolor="white" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<table width="100%" cellspacing="4" cellpadding="4" border="0">
<tr>
    <td><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td align="right">&nbsp;<A HREF="index89.html" TARGET="_top" class="NAWIGACJA">nastêpny punkt&nbsp;&#187;</a></td></tr></table><br clear="all"><A NAME="EDU.wyklad.punkt 1"></A><div class="tytulpunktu">1. Pojêcie tablicy. Realizacja tablic w Javie</div>

<a name="W11.1"></a>

<p>
Dane w programie mog±  byæ organizowane w ró¿ny sposób. W szczególno¶ci 
jako zestawy (powi±zanych i/lub w okreslony sposób uporz±dkowanych) warto¶ci.
W tym kontek¶cie mówimy o<A NAME="EDU.skorowidz.termin struktury_danych 88_634"></A> <b>strukturach danych</b>.<br>
Jednym z wa¿nych rodzajów struktur danych - s±<A NAME="EDU.skorowidz.termin tablica 88_635"></A> <b>tablice</b>.<br>
<br>

<div class="def">
<b>Tablice</b> s± zestawami elementów (warto¶ci) <b>tego samego typu</b>, u³o¿onych na okre¶lonych
<b>pozycjach</b>. Do ka¿dego z tych elementów mamy <b>bezpo¶redni</b> (<b>
swobodny</b> - nie wymagaj±cy przegl±dania innych elementów zestawu) dostêp
poprzez <b>nazwê tablicy</b> i pozycjê elementu w zestawie, okre¶lan± przez
<b>indeks</b> lub indeksy tablicy.</div>

<br>
<p>
Na przyk³ad, tablica czterech liczb ca³kowitych mo¿e wygl±daæ tak.<br><br>

<div>
<img src="images/tab1-10.jpg" alt="Rys" width="347" height="82" border="1">
</div>

<br><p>
Pierwszy element - liczba 21 ma indeks 0, drugi - liczba 13 indeks 1 itd.<br>
Do elementów tablicy odwo³ujemy siê za pomoc± nazwy tablicy oraz  indeksu umieszczonego w nawiasach kwadratowych.<br>
Je¿eli ta tablica ma nazwê tab, to do pierwszego elementu odwo³ujemy siê
poprzez nazwê tablicy i indeks 0: tab[0], do drugiego - tab[1] itd. Jak widaæ,
odwo³anie np. do 3-go elementu - nie wymaga przegl±dania innych elementów.<br>
<br>
<br><A NAME="EDU.skorowidz.termin tablica jako_obiekt 88_636"></A> <b>W Javie tablice s± obiektami</b>, a nazwa tablicy jest nazw± zmiennej,
bêd±cej referencj± do obiektu-tablicy. Obiekt-tablica zawiera elementy tego
samego typu. Mo¿e to byæ dowolny z typów pierwotnych lub referencyjnych.
Zatem, w szczególno¶ci elementami tablic mog± byæ referencje do innych tablic. Mamy wtedy do czynienia z odpowiednikiem tablic <b>wielowymiarowych</b> (<a href="javascript:popUp('dodatki/Tablice.htm', 75,75)">zob. uwagi o<A NAME="EDU.skorowidz.termin tablica wielowymiarowa 88_637"></A> tablicach wielowymiarowych</a>). <br>
<br>
Tak samo jak wszystkie inne zmienne - tablice musimy deklarowaæ przed u¿yciem ich nazw w programie. <br>
<br><A NAME="EDU.skorowidz.termin tablica deklaracja 88_638"></A> 
<div class="syntax">Deklaracja tablicy sk³ada siê z:<br>
<ul>
  <li>nazwy typu elementów tablicy,</li>
  <li>pewnej liczby par nawiasów kwadratowych (liczba par okresla liczbê wymiarów tablicy),</li>
  <li>nazwy zmiennej, która identyfikuje tablicê.</li>
</ul>
Np.<br>
        int[]  arr;   // jest deklaracj± tablicy liczb ca³kowitych (typu int),<br>
        String[] s;  // jest deklaracjê tablicy referencji do obiektów klasy String<br>
        Button[] b; // jest deklaracjê tablicy referencji do obiektów klasy Button<br>
        double[][] d;  // jest deklaracj± dwuwymiarowej tablicy liczb rzeczywistych<br>
<br>¦ci¶lej mo¿na powiedzieæ, ¿e deklarowane s± tu <b>zmienne tablicowe</b>.<br>
Typ takiej zmiennej jest typem referencyjnym, a jego nazwa sk³ada siê z nazwy
typu elementów tablicy i nawiasów kwadratowych. W powy¿szych przyk³adach:<br>
    zmienna arr jest typu int[]<br>
    zmienna s jest typu String[]<br>
    zmienna d jest typu double[][]<br>
</div>

<br>
<p><A NAME="EDU.skorowidz.termin tablica rozmiar 88_639"></A> <b><font color="#cc0000">Uwaga: rozmiar tablicy nie stanowi sk³adnika deklaracji tablicy.</font></b><br><br>

Np. taka deklaracja:<br>
    int[5] arr;  <br>
jest niedopuszczalna.<br>
<br>

<div class="notel">Skoro tablice s± obiektami - to jakich klas? Otó¿ w trakcie kompilacji
programu niejawnie tworzone s± definicje klas dla tablic. Klasy te maj± specjalne
nazwy - tylko dla potrzeb JVM (np. klasa opisuj±ca jednowymiarow± tablicê
liczb ca³kowitych ma nazwê [I) i jedno pole - sta³± typu int o warto¶ci równej
liczbie elementów tablicy</div>

<div class="ddd"><br>
Je¿eli oswoimy siê z my¶l±, ¿e tablice s± obiektami,
to - przez analogiê do innych obiektów - bêdzie nam ³atwo zrozumieæ ró¿nicê
pomiêdzy deklaracj± i utworzeniem tablicy.
</div>
<br clear="all">

<br>
<p>
Deklaracja tablicy tworzy referencjê. <br>
 <br>
int[] arr;   // arr jest referencj± <br>
               // arr jest zmienn± typu int[], który jest typem referencyjnym<br>
<br>
<b>Taka deklaracja nie alokuje pamiêci dla samej tablicy! </b><br>
<br>

<div class="important">Pamiêæ jest alokowana dynamicznie albo w wyniku inicjacji za pomoc± nawiasów klamrowych albo w wyniku u¿ycia wyra¿enia new. </div>

<br><A NAME="EDU.skorowidz.termin tablica inicjacja 88_640"></A> 
<div class="syntax"><br>
Inicjacja tablicy za pomoc± nawiasów klamrowych mo¿e wyst±piæ wy³±cznie w wierszu deklaracji tablicy i ma postaæ:<br>
<br>
        { <i><b>element_1, element_2, .... element_N </b></i>}<br>
<br>
gdzie: <br>
            <i><b>element_i</b></i>  - i-ty element tablicy (warto¶æ)<br>
</div>

<br>
<p>
Np.<br>
<br>
        int[] arr = { 1, 2, 7, 21 };<br>
<br>
deklaruje tablicê o nazwie arr, tworzy j± i inicjuje jej elementy; kolejno:<br>
<ol>
  <li>Wydzielana jest pamiêæ dla zmiennej arr, która bêdzie przechowywaæ referencjê do obiektu-tablicy.</li>
  <li>Wydzielana jest pamiêæ (dynamicznie, na stercie) potrzebna do przechowania 4 liczb ca³kowitych (typu int).</li>
  <li>Kolejne warto¶ci 1,2,7,21 s± zapisywane kolejno w tym obszarze pamiêci.</li>
  <li>Adres tego obszaru (referencja) jest przypisywany zmiennej arr. </li>
</ol>

<p><A NAME="EDU.skorowidz.termin tablica utworzenie 88_641"></A> Drugi sposób utworzenia tablicy polega na zastosowaniu wyra¿enia new.<br>
<br>

<div class="syntax"> <br>
Tworzenie tablicy za pomoc± wyra¿enia new ma postaæ<br>
<br>
            <b>new <i>T</i>[<i>n</i>];</b><br>
<br>
gdzie:<br>
<ul>
  <li><i><b>T</b></i>  - typ elementów tablicy</li>
  <li><i><b>n</b></i>  -  rozmiar tablicy (liczba elementów tablicy)<br>
  </li>
</ul>
</div>

<br>

<div class="notel">Uwaga: nawiasy s± kwadratowe, a nie okr±g³e, jak w przypadku u¿ycia new z konstruktorem jakiej¶ klasy</div>

<div class="ddd"><br>
Na przyk³ad:<br>
<br>
 int[] arr;               // deklaracja tablicy<br>
 arr = new int[4];   // utworzenie tablicy 4 elementów typu int<br>
<br>
Mo¿na to te¿ zapisaæ od razu w wierszu deklaracji:<br>
<br>
 int[] arr = new int[4]; <br>
<br>
Mechanizm dzia³ania jest tu identyczny jak w przypadku innych obiektów.<br>
Przypomina go poni¿szy rysunek.</div>
<br clear="all">
<br>

<div>
<img src="images/tab2-10.jpg" alt="Rys" width="333" height="175" border="1">
</div>

<br>
<p><A NAME="EDU.skorowidz.termin tablica rozmiar 88_642"></A> Zauwa¿my, ¿e rozmiar tablicy mo¿e byæ ustalony dynamicznie, w fazie wykonania programu. Np.<br>
<br>
int n;<br>
//... n uzyskuje warto¶æ <br>
// np. na skutek obliczeñ opartych na wprowadzonych przez u¿ytkownika danych<br>
//...<br>
int[] tab = new int[n];<br>
<br>
<b><font color="#ff0000">Ale - uwaga - po ustaleniu rozmiar nie mo¿e byæ zmieniony.</font></b> <br>
<br>
Jak ju¿ wspomniano do elementów tablic odwo³ujemy siê za pomoc± indeksów.<br>
<br><A NAME="EDU.skorowidz.termin tablica indeks 88_643"></A> 
<div class="important">
Indeksy tablicy mog± byæ wy³±cznie warto¶ciami typu int.<br><br>
Mog± byæ dowolnymi wyra¿eniami, których wyliczenie daje warto¶æ typu int.<br>
<br>
Tablice zawsze indeksowane s± poczynaj±c od 0.<br>
Czyli np. pierwszy element n-elementowej tablicy ma indeks 0, <br>
a ostatni - indeks n-1.</div>

<br>
<p>
Ze wzglêdu na to, ¿e warto¶ci typu byte, char i short s± w wyra¿eniach "promowane"
(przekszta³cane) do typu int), to równie¿ warto¶ci tych typów mo¿emy u¿ywaæ
przy indeksowaniu tablic. Niedoposzczalne natomiast jest u¿ycie warto¶ci
typu long.<br>
<br>

<div class="syntax">Odwo³anie do <i><b>i</b></i>-go elementu tablicy o nazwie <i><b>tab</b></i> ma postaæ:<br>
<br>
                <b><i>tab</i>[<i>i</i>]</b><br>
<br>
Ta konstrukcja sk³adniowa traktowana jest jako zmienna, stanowi nazwê zmiennej
- zatem mo¿emy tej zmiennej przypisywaæ warto¶ci innych wyra¿eñ oraz mo¿emy
u¿ywaæ jej warto¶ci w innych wyra¿eniach</div>

<br>

<p>
Na przyk³ad:<br>
int[] a = new int[3];<br>
a[1] = 1;  // nadanie DRUGIEMU elementowi tablicy <i><b>a</b></i> warto¶ci 1<br>
int c = a [1] + 1;  // c bêdzie mia³o warto¶æ 2<br>
int i = 1, j = 1;<br>
a[i +j] = 7;  // nadanie elementowi o indeksie i+j (=2) warto¶ci 7<br>
<br>
Odwo³ania do elementów tablic s± przez JVM sprawdzane w trakcie wykonania
programu pod wzglêdem<A NAME="EDU.skorowidz.termin indeks poprawno¶æ 88_644"></A> poprawno¶ci indeksów. Java nie dopu¶ci do odwo³ania
siê do nieistniej±cego elementu tablicy lub podania indksu mniejszego od 0. Próba takiego odwo³ania spowoduje
powstanie wyj±tku (czyli sygna³u o b³êdzie) o nazwie <b>ArrayIndexOutOfBoundsException</b>
, na skutek czego zostanie wyprowadzony odpowiedni komunikat i wykonanie programu
zostanie przerwane (ew. taki wyj±tek mo¿emy obs³u¿yæ - czyli w wybrany przez
siebie sposób zareagowaæ na jego powstanie, o czym w nastêpnych wykladach).<br>
Zobaczmy przyk³ad.<br>

<pre>
public class Test {

  public static void main(String[] args) {
    int[] a = {1, 2, 3, 4 };
    System.out.println(a[4]);
    System.out.println(a[3]);
    System.out.println(a[2]);
    System.out.println(a[1]);
  }

} </pre>

<p>
Zauwa¿my - mamy tu tablicê sk³adaj±c± siê z 4 liczb ca³kowitych. Chcemy po
kolei wyprowadziæ jej elementy od ostatniego poczynaj±c. Czêstym b³êdem jest
zapominanie o tym, ¿e tablice indeksowane s± od zera: w tym programie
zapomniano o tym i próbowano odwo³aæ siê do ostatniego elementu tablicy <i><b>a</b></i> za pomoc± <i><b>a</b></i>
[4] (kto¶ pomy¶la³: skoro s± cztery elementy - to ostatni jest a[4]). Tymczasem
jest to odwo³anie poza zakres tablicy, do nieistniej±cego 5-go elementu!
Ten b³±d zostanie wykryty, na konsoli pojawi siê komunikat i program zostanie
przerwany.<br>
<br>

<div class="listing100">Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException<br>
        at Test.main(Test.java:5)<br>
</div>

<br>
<p>
<font color="#cc0000">Proszê skompilowaæ ten program, przekonaæ siê jak dzia³a w tej wersji, po czym:<br>
</font>
<ul>
  <li><font color="#cc0000">odwróciæ kolejno¶æ wypisywania elementów tablicy
(a[1], a[2], a[3], a[4]) i zobaczyæ co teraz siê stanie przy wykonaniu tego
programu</font></li>
  <li><font color="#cc0000">poprawiæ program, tak by bezb³êdnie wypisywa³ kolejne elementy tablicy<br>
    </font></li>
</ul>

<p>
W powy¿szym przyk³adzie by³o nieco ¿mudne wypisywanie kolejnych elementów
tablicy. W naturalny sposób powinni¶my to robiæ w pêtli.<br>
<br>
Mo¿e tak?<br>
<br>

<pre>
public class Test {

  public static void main(String[] args) {
    int[] a = {1, 2, 3, 4 };
    for (int i=3; i&gt;=0; i--) System.out.println(a[i]);
  }

}
</pre>

<p>
Mhm, a co siê stanie gdy zmienimy rozmiar tablicy dodaj±c kilka nowych elementów
w inicjacji? Bêdziemy musieli od nowa  policzyæ elementy i zmieniæ inicjacjê
licznika pêtli. Trochê niewygodne, a do tego nara¿a nas na b³êdy. A przecie¿
rozmiar tablicy znany jest JVM, niech zatem "liczeniem" elementów zajmuje
siê komputer.<br>
<br><A NAME="EDU.skorowidz.termin length 88_645"></A> 
<div class="syntax">Zawsze mo¿emy uzyskaæ informacje o rozmiarze (liczbie elementów) tablicy za pomoc± odwo³ania:<br>
 <br>
                <i><b>nazwa_tablicy</b></i><b>.length </b><br>
<br>
Uwaga: czêstym b³êdem jest traktowanie tego wyra¿enia jako wywo³ania metody.
W tym przypadku length nie jest nazw± metody (lecz pola niejawnie stworzonej klasy, opisuj±cej tablicê), dlatego <b>NIE STAWIAMY</b> po nim nawiasów okr±g³ych</div>

<br>
<p>
Zatem poprzedni program mo¿na by zapisaæ tak:

<pre>
public class Test {

  public static void main(String[] args) {
    int[] a = {1, 2, 3, 4 };
    for (int i=a.length-1; i&gt;=0; i--) System.out.println(a[i]);
  }

}
</pre>

<div><a href="javascript:popUp('dodatki/W11Prb1.htm',50,50)"><img src="images/Problem.jpg" alt="Problem" hspace="15" width="137" height="84" border="1" align="Right"></a> </div>

<br><p>
Spróbujmy teraz odwróciæ kolejno¶æ wypisywania elementów tablicy (czyli po kolei od pierwszego poczynaj±c).<br>
Jak powinna wygl±daæ pêtla for?<br>

<br>

<div class="important"><br>
Przed lektur± dalszego tekstu proszê rozwi±zaæ to zadanie samodzielnie
<br>
<br>
</div>

<br>
<p>
Rozwi±zanie:<br>

<pre>
public class Test {

  public static void main(String[] args) {
    int[] a = {1, 2, 3, 4 };
    for (int i=0; i&lt;a.length; i++) System.out.println(a[i]);
  }

}
</pre>

<br>

<div class="important">
Przebiêgaj±c w pêtli przez wszystkie (poczynaj±c od pierwszego) elementy tablicy <i><b>tab</b></i> musimy zmieniaæ indeksy od <b>0</b> do <b><i>tab</i>.length-1</b>, czyli zastosowaæ nastêpuj±c± postaæ pêtli for:<br>
<br>
<div align="Center"><b>for (int i = 0; i &lt; tab.length; i++) ... tab[i] ... ;</b><br>
</div>
</div>

<br>
<p>
U¿ycie length wobec tablicy jest szczególnie wygodne w metodach, które otrzymuj±
jako argumenty referencje do tablic: mo¿emy w ten sposób pisaæ uniwersalne
metody dzia³aj±ce na tablicach o ró¿nych rozmiarach.</p><br clear="all"><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td align="right">&nbsp;<A HREF="index89.html" TARGET="_top" class="NAWIGACJA">nastêpny punkt&nbsp;&#187;</a></td></tr></table></td>
</tr>
</table>
</body>
</html>
