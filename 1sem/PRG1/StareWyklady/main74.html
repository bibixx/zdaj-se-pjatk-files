<!DOCTYPE HTML PUBLIC "-//W3C//DTD html 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="pragma" content="no-cache">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
<meta http-equiv="Content-Language" content="pl">
<title></title>
<meta name="Keywords" content="s³owa kluczowe">
<meta name="Description" content="">
<LINK REL="stylesheet" TYPE="text/css" HREF="main.css">
<script language="JavaScript" src="skrypty.js" type="text/javascript"></script>
</head>
<body bgcolor="white" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<table width="100%" cellspacing="4" cellpadding="4" border="0">
<tr>
    <td><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td align="left"><A HREF="index73.html" TARGET="_top"  class="NAWIGACJA">&#171;&nbsp;poprzedni punkt</a>&nbsp;</td><td align="right">&nbsp;<A HREF="index75.html" TARGET="_top" class="NAWIGACJA">nastêpny punkt&nbsp;&#187;</a></td></tr></table><br clear="all"><A NAME="EDU.wyklad.punkt 5"></A><div class="tytulpunktu">5. Wielowariantowe wybory za pomoc± instrukcji switch</div>

<p>
Zamiast wielokrotnych if - else if w niektórych przypadkach mo¿na zastosowaæ<A NAME="EDU.skorowidz.termin instrukcja_wyboru_wielowariantowego_switch 74_587"></A> instrukcjê wyboru wielowariantowego switch. Ma ona nastêpuj±c± ogóln± postaæ<br>
<br><A NAME="EDU.skorowidz.termin switch 74_588"></A> 
<div class="syntax"><br>

        switch (<i><b>wyr</b></i>) <i><b>blok_switch</b></i><br>
<br>

gdzie:<br>
<ul>
<li>wyra¿enie <i><b>wyr</b></i> musi byæ typu <code>char</code>, <code>byte</code>, <code>short</code>, lub <code>int</code></li><li><i><b>blok_switch</b></i> ma szczególn± postaæ. W jego wnêtrzu (pomiêdzy nawiasami klamrowymi) mo¿na u¿ywaæ etykiet o postaci:<br><b>case <i>wyr_sta³e</i></b> : <i><b>ins</b></i><br>

oraz<br><b>default</b> : <i><b>ins</b></i>   // UWAGA. Etykieta default mo¿e byæ tylko jedna <br></li>
</ul>

</div>

<br>
<p>

Wyra¿enie w nawiasach switch jest wyliczane, a jego warto¶æ porównywana z
warto¶ciami wyra¿eñ sta³ych (zawartych w czê¶ciach oznaczanych przez etykiety
case). Sterowanie jest przekazywane do tej instrukcji, któr± poprzedza etykieta
case z wyra¿eniem sta³ym równym co do warto¶ci wyra¿eniu w nawiasach switch.<br>

Od tego miejsca wykonanie programu przebiega dalej sekwencyjnie (po to by
nie wykonywa³y siê inne instrukcje oznaczone przez inne etykiety case, nastêpuj±ce
po wybranej w rezultacie porównania, trzeba zastosowaæ instrukcjê break lub
return).<br>

Je¶li nie znajdzie siê ¿adna etykieta "pasuj±ca" do warto¶ci wyra¿enie w
nawiasach switch, to sterowanie jest przekazywane do czê¶ci oznaczanej przez<A NAME="EDU.skorowidz.termin etykieta default 74_589"></A> etykietê default, a je¶li jej nie ma, to - do instrukcji nastêpuj±cej w programie
po switch.<br>
<br>

Rozwa¿my przyk³ad klasy, która udostêpnia metodê makeOp wykonania operacji
arytmetycznych na elementach swoich obiektów - dwóch liczbach rzeczywistych.<br>

<pre>
public class SimpleCalc {

  private double a;
  private double b;

  public SimpleCalc(double x, double y) {
    a = x;
    b = y;
  }

  public double makeOp(char op) {

    double r = 0;

    switch(op) {
       case '+' : r = a + b; break;
       case '-' : r = a - b; break;
       case '*' : r = a * b; break;
       case '/' : r = a / b; break;
       default  : System.out.println("Nieznany kod operacji");
    }

    return r;
  }

}

class SimplecalcTest {

  public static void main(String[] args) {

    SimpleCalc sc = new SimpleCalc(1.2, 3.7);
    System.out.println( sc.makeOp('+'));
    System.out.println( sc.makeOp('-'));
    System.out.println( sc.makeOp('*'));
    System.out.println( sc.makeOp('/'));

  }
}
</pre>

<p>
W metodzie makeOp warto¶æ zmiennej op (typu char) steruje obliczeniami (np. je¶li
zawiera znak '+' to sterowanie jest przekazywane do miejsca oznaczonego etykiet±
case '+', warto¶æ r jest wyliczana jako suma a i b, a instrukcja break pozwala
opu¶ciæ dalsze instrukcje zawarte w bloku switch).<br>
<br><A NAME="EDU.skorowidz.termin etykieta case 74_590"></A> 
<div class="notec">Warto szczególnie podkre¶liæ, ¿e etykiety case s± tworzone przez wyra¿enia
sta³e.<A NAME="EDU.skorowidz.termin wyra¿enie_sta³e 74_591"></A> Wyra¿enie sta³e to takie, którego warto¶æ jest znana w fazie kompilacji
i nie mo¿e byæ zmieniona w fazie wykonania programu. Bêdzie to np. litera³
(taki jak '+'. '*' czy 1), nazwa sta³ej (zadeklarowanej jako final), wyra¿enie
sk³adaj±ce siê z litera³ów i nazw sta³ych  po³±czonych operatorami jêzyka
(np. LMAX + 3/LMIN, gdzie LMAX i LMIN - nazwy sta³ych). Warto¶æ wyra¿enia
sta³ego musi byæ typu ca³kowitego i daæ siê przekszta³ciæ do typu wyra¿enia
w nawiasach switch.</div>

<br>
<p>

Nie nale¿y tez zapominaæ o umieszczeniu instrukcji we w³a¶ciwym momencie
przerywaj±cych sekwencje operacji zawartych w bloku swicth. <br>

Np. poni¿sza sekwencja:<br>
<br>

double a = 0.1;<br>

switch(n) {<br>

   case 1 : a = a + 1;<br>

   case 2 : a = a + 2;<br>

   case 3 : a = a + 3;<br>

}<br>

System.out.prinln(a);<br>
<br>

wypisze: 6.1 (dla n = 1), 5.1 (dla n = 2) i 3.1 (dla n = 3), za¶ dla innych
warto¶ci n inicjaln± warto¶æ zmiennej a (0.1). Je¶li chcemy uzyskaæ 1.1 dla
n =1, 2.1 dla n=2 i 3.1 dla n=3 to po ka¿dym wyliczeniu a nale¿y wstawiæ<A NAME="EDU.skorowidz.termin instrukcja_break 74_592"></A> instrukcjê break, przerywaj±c± sekwencyjne wykonywanie instrukcji zawartych
w bloku i przekazuj±c± sterowanie do pierwszej instrukcji poza switch.<br>
<br>

Etykiety case i default mog±  wystêpowaæ w dowolnej kolejno¶ci, ale w  ramach
jednego switch nie mo¿e byæ dwóch takich samych etykiet (nie mo¿e byæ dwóch
wyra¿eñ sta³ych, które daj± w rezultacie tê sam± warto¶æ np. 3 i 1 + 2 lub
dwóch etykiet default). <br>
<br>

Co jednak, je¶li instrukcje switch s± w³o¿one ? Okazuje siê, ¿e etykiety
case i default s± kojarzone zawsze ze "swoim" switch, mo¿emy wiêc pisaæ np.
tak:<br>
<br>

    switch(i)    {<br>    case 1 : switch(testNum(i)) {<br>        case 1 : System.out.println("same one"); break;<br>        case 2 : System.out.println("double one"); break;<br>        default: System.out.println("other one"); break;<br>        }<br>        break;<br>

          case 2 :  System.out.println("two"); break;<br>

          default:  System.out.println("other two"); break;<br>

    }<br>
<br>

(je¶li funkcja testNum zwraca podwojona warto¶æ swojego argumentu, to wprowadzenie
1 da na wyj¶ciu napis "double one", za¶ 2 - napis "two")<br>
<br>

Zwyk³a instrukcja break przerywa wykonanie tego bloku switch, w którym jest umieszczona.</p>

<div class="notel">
Etykieta w programie jest identyfikatorem z nastêpuj±cym znakiem :. Nie
nale¿y myliæ ogólnego pojêcia etykiety ze specjalnym przypadkiem  "etykiety"
case</div>

<div class="ddd"><br><A NAME="EDU.skorowidz.termin etykieta 74_593"></A> Je¶li natomiast w instrukcji break podamy etykietê, to sterowanie
mo¿e byæ przekazane z bloku switch do instrukcji wskazywanej przez tê etykietê.
W ten sposób za pomoc± break mo¿emy wychodziæ z g³êboko zagnie¿d¿onych bloków
switch.
</div>
<br clear="all">
<br>

<p>
Uwaga: stosowanie etykiet w instrukcji break dla wychodzenia z zagnie¿d¿onych
bloków dotyczy rózwnie¿ instrukcji steruj±cych for, while i do_while. Stosowanie
etykiet podlega pewnym ograniczeniom - zob. opis jêzyka na stronie sun.java,com.</p><br clear="all"><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td align="left"><A HREF="index73.html" TARGET="_top"  class="NAWIGACJA">&#171;&nbsp;poprzedni punkt</a>&nbsp;</td><td align="right">&nbsp;<A HREF="index75.html" TARGET="_top" class="NAWIGACJA">nastêpny punkt&nbsp;&#187;</a></td></tr></table></td>
</tr>
</table>
</body>
</html>
