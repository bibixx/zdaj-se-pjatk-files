<!DOCTYPE HTML PUBLIC "-//W3C//DTD html 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="pragma" content="no-cache">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
<meta http-equiv="Content-Language" content="pl">
<title></title>
<meta name="Keywords" content="s³owa kluczowe">
<meta name="Description" content="">
<LINK REL="stylesheet" TYPE="text/css" HREF="main.css">
<script language="JavaScript" src="skrypty.js" type="text/javascript"></script>
</head>
<body bgcolor="white" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<table width="100%" cellspacing="4" cellpadding="4" border="0">
<tr>
    <td><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td align="left"><A HREF="index81.html" TARGET="_top"  class="NAWIGACJA">&#171;&nbsp;poprzedni punkt</a>&nbsp;</td><td align="right">&nbsp;<A HREF="index83.html" TARGET="_top" class="NAWIGACJA">nastêpny punkt&nbsp;&#187;</a></td></tr></table><br clear="all"><A NAME="EDU.wyklad.punkt 3"></A><div class="tytulpunktu">3. Pêtle iteracyjne o danej liczbie powtórzeñ: instrukcja for</div>

<a name="W10.3"></a><A NAME="EDU.skorowidz.termin pêtle_iteracyjne_o_danej_liczbie_powtórzeñ 82_619"></A> 
<p>Instrukcja for ma nastêpuj±c± postaæ.<br>
<br>

<div class="syntax"><br>
<b>            for</b> (<b><i>init</i></b>; <b><i>wyr</i></b>; <b><i>upd</i></b>) <b><i>ins</i></b><br>

gdzie:<br>
<ul>
  <li>czê¶æ init -  mo¿e nie wystêpowaæ albo mo¿e byæ deklaracj± jednej lub
wielu zmiennych lub wyra¿eniem lub list± wyra¿eñ rozdzielonych przecinkami.</li>
  <li>czê¶æ wyr - jest wyra¿eniem o warto¶ci typu boolean (lub mo¿e nie wystêpowaæ),</li>
  <li>czê¶æ upd  - jest wyra¿eniem lub list± wyra¿eñ rozdzielonych przecinkami (lub mo¿e nie wystêpowaæ).</li>
  <li>ins - jest instrukcj± wykonywan± w pêtli (w szczególno¶ci mo¿e to byæ instrukcja grupuj±ca)</li>
</ul>
  </div>

<p><A NAME="EDU.skorowidz.termin instrukcja_for 82_620"></A> Instrukcja for tworzy pêtlê, która dzia³a w nastêpuj±cy sposób:<br>
<ol>
  <li>Opracowywana jest deklaracja lub lista wyra¿eñ w czê¶ci <i><b>init</b></i>  (je¶li wystêpuje).</li>
  <li>Wyliczane jest wyra¿enie <i><b>wyr</b></i>. Je¿eli jego warto¶æ równa jest false, to instrukcja for koñczy dzia³anie, w przeciwnym razie (lub gdy <i><b>wyr</b></i> jest pominiête) dzia³anie instrukcji for jest kontynuowane (krok 3).</li>
  <li>Wykonywana jest instrukcja <i><b>ins</b></i> (je¶li jest to instrukcja
grupuj±ca i w jej "¶rodku" znajduje siê instrukcja break lub return  przekazuj±ca
sterowanie poza blok tej instrukcji grupuj±cej, to instrukcja for koñczy
dzia³anie) </li>
  <li>Obliczane s±  wyra¿enia w czê¶ci <i><b>upd</b></i> (je¶li wystêpuje). Dzia³anie jest wznawiane od kroku 2.</li>
</ol>

<p>
Porównuj±c instrukcjê for z instrukcj± while mo¿na wskazaæ, ¿e taki sam efekt jak za pomoc± instrukcji:<br>
                        for (init; wyr; upd)  <br>
mo¿emy uzyskaæ zapisuj±c nastêpuj±cy fragment za pomoc± instrukcji while:
<pre>
init;
while (wyr) {
  ins;
  upd;
}
</pre>

<br>

<div class="notel">Dobry styl programowania nakazuje u¿ywaæ instrukcji for wy³±cznie w tym
celu.</div>

<div class="ddd"><br>
Najprostsze zastosowanie ma instrukcja for przy organizacji pêtli
iteracyjnych ze znanym zakresem iteracji. W tym przypadku czê¶c init inicjuje
licznik, wyra¿enie wyr kontroluje granice licznika, czê¶æ upd zmienia bie¿±c±
warto¶æ licznika.
</div>
<br clear="all">


<p>
Krótkie przyk³ady<br>

<br>
int n = ...;<br>
int sum = 0;<br>
for (int i = 1; i &lt;= n; i++) sum += i;<br>
<br>
(sumuje n pierwszych dodatnich liczb ca³kowitych)<br>
<br>
for (int i = 2; i &lt;= n; i+=2) sum += i;<br>
<br>
(sumuje n pierwszych dodatnich liczb parzystych)<br>
<br>
for (int i = 1000; i  &gt;= 990; i--) System.out.println(i);<br>
<br>
(wyprowadza na konsolê kolejne liczby od 1000 do 990)<br>
<br>
for (char c = 'a';  c &lt;= 'z';  c++) System.out.print(c);<br>
<br>
(wyprowadza na konsolê kolejne ma³e litery od a do z)<br>

<br>
W czê¶ci init mo¿e wyst±piæ deklaracja kilku zmiennych (ale jedna deklaracja, zatem musz± byæ to zmienne tego samego typu). Np.<br>
<br>
for (int i =1, j = 2; i &lt;=n &amp;&amp; j &lt;= m; i++, j++)  System.out.println(i+j);<br>
<br><A NAME="EDU.skorowidz.termin zasiêg_zmiennych_deklarowanych_w_czê¶ci_inicjacyjnej_instrukcji_for 82_621"></A> 
<div class="important">Zasiêg zmiennych deklarowanych w czê¶ci inicjacyjnej  instrukcji for zaczyna siê od miejsca deklaracji i <b>koñczy wraz z koñcem instrukcji for</b></div>

<br>
<p>
Obrazuje to poni¿szy rysunek:<br><br>

<div>
<img src="images/insfor10.jpg" alt="Rys" width="447" height="144" border="1">
</div>

<br><p>
Na przyk³ad:<br>
int a =0, n = 10;<br>
for (int i = 0; i &lt; n; i++) a += i;<br>
for (int j = i; j &lt; n*2; j++) a+=j; &lt;--- <b><font color="#ff6600">b³±d!</font></b> zmienna <i><b>i</b></i> jest nieznana<br>
<br>
System.out.println(i);  &lt;--- <b><font color="#ff6600">b³±d!</font></b> zmienna <i><b>i</b></i> jest nieznana<br>
<br>
for (int i = n; i&lt; n*2; i++) a+=i;  &lt;--- OK, nowa zmienna i<br>
<br>
for (int i = 0; i &lt; n; i++)  {         &lt;--- OK, nowa zmienna i<br>
      a += i;                                       u¿ywana w bloku <br>
      System.out.println(i + " " + a)<br>
} <br>
<br>
for (int i = 0; i &lt; n; i++)  {         &lt;--- OK, nowa zmienna i<br>

      int i = 1;                             &lt;--- <b><font color="#ff6600">b³±d!</font></b>  redeklaracja zmiennej i<br>
      ...<br>
} <br>

<div class="notel33">Terminem redeklaracja okre¶lamy ponown± deklaracjê zmiennej lokalnej
w jej zasiêgu, tzn. w bloku. Przypomnijmy: ka¿da zmienne lokalna mo¿e byæ
deklarowana tylko raz w bloku i nie jest dopuszczalne przes³anianie nazw
zmiennych lokalnych w blokach wewnêtrznych. Nazwy zmiennych, opisuj±cych
pola klasy mog± byæ w blokach metod przes³aniane.</div>

<div class="ddd"><br><A NAME="EDU.skorowidz.termin redeklaracja 82_622"></A> Oczywi¶cie, wcale nie musimy deklarowaæ zmiennych w czê¶ci inicjacyjnej instrukcji
for, ale - pamiêtajmy, ¿e zgodnie z ogóln± zasad± - ka¿da zmienna musi byæ
przed u¿yciem zadeklarowana:
<br><br>
int a =0, n = 10, i;<br>

for (i=0; i &lt; n; i ++) a+=i;        // Ok<br>
for (i=n; i &lt; n*2; i++) a+=i;      // Ok<br>
</div>
<br clear="all">

<br><p>
Ale nie wolno pisaæ tak:<br>
<br>
int i = 0;<br>
for (int i = 0; i&lt; 10; i++) ... //  <font color="#ff6600"><b>b³±d!</b></font> redeklaracja i<br>
<br>
<br><A NAME="EDU.skorowidz.termin instrukcja_for praktyczne_zastosowania 82_623"></A> Przejd¿my teraz do praktycznych zastosowañ instrukcji for.<br>
Pierwsze zadanie: za pomoc± instrukcji for policzyæ n-t± potêgê (n&gt;=0) podanej liczby ca³kowitej <i><b>a</b></i>.<br>
<br>

<div class="important"><br>

Przed lektur± dalszego tekstu, proszê
samodzielnie wykonaæ to zadanie, definiuj±c odpowiedni± metodê w klasie Liczba,
któr± mieli¶my opracowaæ w poprzednim podpunkcie.<br>
<br>
</div>

<br>

<p>
Mo¿liwe rozwi±zanie - metoda pow w klasie Liczba, która mo¿e byæ u¿yta na rzecz dowolnej liczby ca³kowitej:<br>
<br>

<pre>
public class Liczba {

  int a;

  public Liczba(int liczba) {  // konstruktor
    a = liczba;
  }

//...

  public double pow(int n) {

    if (n &lt; 0) {        // warunek konieczny: n &gt;=0
       System.out.println("Niedopuszczalna warto¶æ wyk³adnika");
       return -0.1;
    }
    double wynik = 1;
    for (int i = 1; i &lt;= n; i++) wynik *= a;
    return wynik;
  }
</pre>

<p>
Zauwa¿my, ¿e w pêtli for zastosowali¶my zmiany licznika od 1 do n (w³±cznie).
Ten sam efekt mogliby¶my osi±gn±æ pisz±c: for (i=0; i&lt;n; i++).<br>
<br>

<div class="important">Instrukcje w nastêpuj±cych pêtlach for zostan± wykonane n - razy<br>
<br>
        for (int i = 1; i &lt;= n; i++) ....<br>
<br>
        for (int i = 0; i &lt; n; i++) ....<br>
<br>
i pod wzglêdem liczby "obrotów" pêtli obie instrukcje for s± równowa¿ne</div>

<br>
<p>
Drugi praktyczny przyk³ad zastosowania instrukcji for polega na rozwi±zaniu nastêpuj±cego zadania.<br>
W zbudowanej i omówionej wcze¶niej  klasie Account dostarczyæ metody:<br>
double getBalanceAfter(int n), która zwraca stan konta po n miesi±cach.<br>
<br>

<div class="important"><br>

<b>Przed lektur± dalszego tekstu proszê spróbowaæ samodzielnie rozwi±zaæ to zadanie.</b><br>
<br>
</div>

<br>

<p>
Mo¿liwe rozwi±zanie:<br>

<pre>
  public double getBalanceAfter(int n) {
     double wspOds = (interest/100)/12;
     for (int i = 1; i &lt;= n; i++)
       balance += wspOds*balance +  monthIncome - monthExpend;
     return balance;
  }
</pre>

<p>
Ogólnie, instrukcja for jest bardzo elastyczna. Spe³niaj±c regu³y sk³adniowe mo¿emy pisaæ dosyæ dziwne programy.<br>
Np. poni¿szy program pyta o tekst, który ma okalaæ podawane nastêpnie w pêtli
teksty i wyprowadza (w pêtli) napisy z tym "ozdobnikiem" do chwili, gdy u¿ytkownik
nie wci¶nie Cancel w dialogu wej¶ciowym lub dopóki nie zostanie wyprowadzone
LIMIT napisów.<br>
Wszystko to realizowane jest w nawiasach pêtli for (instrukcj± wykonywan±
w pêtli jest instrukcja pusta - co oznaczamy pojedynczym ¶rednikiem). <br>

<pre>
import javax.swing.*;

public class Napisy {

  final int LIMIT = 10;

  public static void main(String[] args) {
     new Napisy();
  }

  public Napisy() {
    String ozdoba = null,
           txt = null;
    int n = 0;

    for (ozdoba = ask("Co wokó³?");
         n &lt;= LIMIT &amp;&amp; ozdoba != null &amp;&amp; (txt = ask("Napis?")) != null;
         n++, System.out.println(n + ": " + ozdoba + txt + ozdoba) );

   System.exit(1);
  }

  private String ask(String txt) {
    return JOptionPane.showInputDialog(txt);
  }


}
</pre>

<p>
<font color="#ff6600">Proszê skompilowac i wykonaæ ten program - tak by widzieæ efekty jego dzia³ania.</font><br>
<br>
Choæ mo¿na tak programowaæ, to jest to raczej niewskazane, gdy¿ program jest ma³o czytelny i nara¿ony na b³êdy. <br>
Podkre¶liæ te¿ warto, ¿e czê¶ci (init, wyr,  upd) instrukjci for s± nieobowi±zkowe
(ka¿da z nich mo¿e byæ pominiêta). Przy tym jednak nie wolno pomijaæ ¶redników
rozdzielaj±cych te czê¶ci.<br>
W szczególno¶ci, za pomoc± for w nastêpuj±cy sposób mo¿na zapisaæ odpowiednik pêtli nieskoñczonej while(true):<br>
<br>
for(;;) {<br>
...<br>
}<br>
<br>
Oczywi¶cie, wewnêtrz takich nieskoñczonych pêtli nalezy przewidzieæ i umie¶ciæ
warunki ich zakoñczenia za pomoc± instrukcji break lub return.<br>
<br>

<div class="important">Ogólnie jednak: u¿ywajmy instrukcji for wy³±cznie do konstruowania pêtli
ze znan± liczb± lub zakresem iteracji, czyli w postaci:<br>
<br>
        <b>for ( i = ?; i &lt;?; i = i ± ?) ...</b><br>
<br>
wszystkie inne przypadki programuj±c za pomoca instrukcji while lub do..while</div>

<br>
<p>
Na koniec warto zwróciæ uwagê na to, ¿e pêtle iteracyjne mog± byæ dowolnie<A NAME="EDU.skorowidz.termin zagnie¿d¿ane pêtle_iteracyjne 82_624"></A> zagnie¿d¿ane.<br>
Przecie¿ <i><b>ins</b></i> w instrukcjach <b>while, do..while</b> i <b>for</b> - to dowolne instrukcje, w tym instrukcje steruj±ce.<br>
<br>
Nic nie stoi na przeszkodzie, by np. zapisaæ taki fragment:<br>
<br>

<pre>
public class Nested {

  public static void main(String[] args) {
     String out = null;
     char c = 'a';
     while (c &lt;= 'd') {
       for (int i=1; i&lt;=2; i++) {
         out = "Dla " + c + " " + i + " mamy j =";
         for (int j = i; j &lt;= i + 3; j++) out += " " + j;
         System.out.println(out);
       }
       c++;
     }
   }

}
</pre>

<p>
i uzyskaæ wydruk:<br><br>

<div class="listing100">Dla a 1 mamy j = 1 2 3 4<br>
Dla a 2 mamy j = 2 3 4 5<br>
Dla b 1 mamy j = 1 2 3 4<br>
Dla b 2 mamy j = 2 3 4 5<br>
Dla c 1 mamy j = 1 2 3 4<br>
Dla c 2 mamy j = 2 3 4 5<br>
Dla d 1 mamy j = 1 2 3 4<br>
Dla d 2 mamy j = 2 3 4 5</div>

<br>
<p>
Proszê przeanalizowaæ wyniki i odpowiedzieæ na pytanie: dlaczego sekwencje<br>
litera nr<br>
powtarzaj± siê (tj dlaczego mamy <i><b>a 1</b></i> i <i><b>b 1</b></i>, <i><b>a 2</b></i> i <i><b>b 2</b></i>)<br>
oraz dlaczego powtarzaj± siê sekwencje <i><b>j = 1 2 3 4 , j = 2 3 4 5</b></i><br>
</p><br clear="all"><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td align="left"><A HREF="index81.html" TARGET="_top"  class="NAWIGACJA">&#171;&nbsp;poprzedni punkt</a>&nbsp;</td><td align="right">&nbsp;<A HREF="index83.html" TARGET="_top" class="NAWIGACJA">nastêpny punkt&nbsp;&#187;</a></td></tr></table></td>
</tr>
</table>
</body>
</html>
