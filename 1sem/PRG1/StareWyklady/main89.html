<!DOCTYPE HTML PUBLIC "-//W3C//DTD html 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="pragma" content="no-cache">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
<meta http-equiv="Content-Language" content="pl">
<title></title>
<meta name="Keywords" content="s³owa kluczowe">
<meta name="Description" content="">
<LINK REL="stylesheet" TYPE="text/css" HREF="main.css">
<script language="JavaScript" src="skrypty.js" type="text/javascript"></script>
</head>
<body bgcolor="white" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<table width="100%" cellspacing="4" cellpadding="4" border="0">
<tr>
    <td><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td align="left"><A HREF="index88.html" TARGET="_top"  class="NAWIGACJA">&#171;&nbsp;poprzedni punkt</a>&nbsp;</td><td align="right">&nbsp;<A HREF="index90.html" TARGET="_top" class="NAWIGACJA">nastêpny punkt&nbsp;&#187;</a></td></tr></table><br clear="all"><A NAME="EDU.wyklad.punkt 2"></A><div class="tytulpunktu">2. Zmienne tablicowe jako argumenty i wyniki metod. U¿ycie zmiennych tablicowych w przypisaniach</div>

<a name="W11.2"></a><A NAME="EDU.skorowidz.termin tablica jako_argument_metody 89_647"></A> 

<div class="notel">Zmiennej tablicowej typu typA[] mo¿na przypisaæ warto¶æ zmiennej tablicowej
typu typB[] pod warunkiem, ¿e dopuszczalne jest przypisanie warto¶ci typu
B zmiennej typu A.<br>
Ka¿dej zmiennej tablicowej - jak ka¿dej zmiennej zawieraj±cej referencjê - mo¿na przypisaæ warto¶æ <b>null</b>
</div>

<div class="ddd"><br><A NAME="EDU.skorowidz.termin tablica w_przypisaniach 89_648"></A> Poniewa¿ zmienna oznaczaj±ca tablicê zawiera referencje do tablicy, to -
pod pewnymi warunkami -  mo¿emy jej przypisaæ referencjê do innej tablicy.
</div>
<br clear="all">

<br><p>
W bardzo naturalny sposób mo¿emy przypisywaæ referencje w przypadku gdy mamy do
czynienia z tym samym typem tablic (a zatem - z tym samym typem elementów
oraz z t± sam± liczb± wymiarów). <br>
<br>

<div class="important">Tak samo jak w przypadku innych obiektów - nie nale¿y myliæ przypisania
zmiennych tablicowych (czyli referencji)  z kopiowaniem zawarto¶ci tablic.</div>

<br>
<p>
Na przyk³ad poni¿szy program:<br>

<pre>
public class Test {

  public static void main(String[] args) {
    byte[] b1 = {1, 2, 3 };
    byte[] b2 = {1, 2, 3, 5, 5 };
    byte[] b = b2;
    b2 = b1;
    b2[0] = 77;
    b[0] = 99;
    System.out.print("\nTablica \"b1\":");
    for (int i=0; i &lt; b1.length; i++) System.out.print(" " + b1[i]);
    System.out.print("\nTablica \"b2\":");
    for (int i=0; i &lt; b2.length; i++) System.out.print(" " + b2[i]);
    System.out.print("\nTablica \"b\":");
    for (int i=0; i &lt; b.length; i++) System.out.print(" " + b[i]);
  }

}
</pre>

<br>

<div class="listing33r">Tablica "b1": 77 2 3<br>
Tablica "b2": 77 2 3<br>
Tablica "b": 99 2 3 5 5</div>

<div class="ddd">Wyprowadzi pokazane obok wyniki.</div>
<br clear="all">

<p>Zwróæmy uwagê:<br>
<ul>
  <li>na pocz±tku b1 oznacza³o tablicê {1,2,3} a b2 tablicê {1,2,3,5,5}</li>
  <li>po przypisaniu b2 = b1; b2 oznacza tablicê {1, 2, 3}</li>
  <li>zatem przypisanie b2[0] = 77 zmieni w tej tablicy pierwszy element</li>
  <li>ale na tê sam± tablicê nadal wskazuje b1, dlatego wypisanie elementów tablicy "b1" da 77 2 3</li>
  <li>zmiennej b przypisano wcze¶niej referencjê do tablicy oznaczanej przez
b2 {1,2,3,5,5} - dlatego za pomoc± b mo¿emy zmieniæ jej pierwszy element
i wypisaæ wszystkie: 99 2 3 5 5<br>
  </li>
</ul>

<p>
W tym przyk³adzie przez chwilê mog³o dziwiæ, ¿e "na tablicê" b2 "podstawiamy
tablicê" (o innych rozmiarach!) - b1. Nie przeczy to jednak zasadzie, ¿e
- po ustaleniu - rozmiary tablic nie mog± byæ zmieniane. No, tak - przecie¿
przypisanie dotyczy referencji do tablic, a nie samych tablic. W przypadku
referencji ró¿ne rozmiary tablic na które one wskazuj± nie s± ¿adn± przeszkod±
przy przypisaniu - rozmiary tablic pozostaj± bez zmian.<br>
I druga wa¿na kwestia, wymagaj±ca jeszcze raz szczególnego podkre¶lenia:
na jedn± tablicê mo¿e wskazywaæ kilka zmiennych tablicowych. Za pomoc± ka¿dej
z nich (i operacji indeksowania) mo¿emy zmieniaæ warto¶ci elementów tej jednej
tablicy, a odwolania do tej tablicy poprzez inne zmienne bêd± - oczywi¶cie
- uwzglêdniaæ te zmiany (np. pokazywaæ zmienione warto¶ci).<br>
<br>
Przekazanie argumentów metodzie i zwrot jej wyniku mog± byæ traktowane jako szczególny rodzaj operacji przypisania.<br>
Zatem metody mog± dzia³aæ na tablicach, do których  referencje otrzymuj± w postaci
parametrów i mog± zwracaæ wyniki - referencje do tablic. <br>
<br>
W przypadku tablic jednowymiarowych typem zmiennych "tablicowych" (inaczej referencji do tablic) jest <i><b>T</b></i>
 [], gdzie T - nazwa typu elementów tablicy. Zatem w nag³ówku metod - parametry
(które maj± oznaczaæ tablice; s± referencjami do tablic) deklarujemy w³a¶nie
za pomoc± takich nazw typu. Oczywi¶cie, gdy wywo³ujemy metodê - to na li¶cie
argumentów podajemy nazwy zmiennych tablicowych (ju¿ bez nawiasowych kwadratowych).
<br>
Je¶li metoda zwraca wynik - referencjê do tablicy, to typem wyniku jest równie¿ odpowiedni typ tablicowy.<br>
<br>
Np. metoda o nazwie dblVal, która zwraca referencjê do nowoutworzonej tablicy
liczb ca³kowitych, warto¶ci elementów której s± podwojonymi warto¶ciami elementów
tablicy liczb ca³kowitych, do której referencja przekazana zosta³a metodzie
jako argument, mo¿e byæ zdefiniowana i u¿yta tak:<br>
<br>

<pre>
public class Test {

  Test() {
    int[] a = {1, 2, 3, 4 };
    int[] wynik = <b><font color="#3366ff">dblVal(a)</font></b>;
    for (int i=0; i &lt; wynik.length; i++)
      System.out.print(" " + wynik[i]);
  }

  <b><font color="#3366ff">int[] dblVal(int[] tab)</font></b> {
    int[] w = new int[tab.length];  // utworzenie tablicy "pod wynik"
                                    // jej rozmiary musz± byæ równe
                                    // rozmiarom tablicy-argumentu
    for (int i=0; i &lt; w.length; i++) w[i] = tab[i]*2;
    return w;
  }

  public static void main(String[] args) {
    new Test();
  }

}
</pre>

<p>
Dobremu zrozumieniu<A NAME="EDU.skorowidz.termin przekazywanie_argumentów_tablicowych 89_649"></A> przekazywania argumentów tablicowych i zwracania tablicowych wyników powinien sprzyjaæ poni¿szy rysunek:<br><br>

<div>
<img src="images/tab3-10.jpg" alt="R" width="568" height="485" border="1">
</div>

<br>
<p>
Proszê zwróciæ uwagê jak niezrêczny by³ opis dzia³ania metody dblVal:<br>
"zwraca referencjê do nowoutworzonej tablicy
liczb ca³kowitych, warto¶ci elementów której s± podwojonymi warto¶ciami elementów
tablicy liczb ca³kowitych, do której referencja przekazana zosta³a metodzie
jako argument"<br>
Aby podkre¶liæ <b>sens</b> metody dblVal powinni¶my raczej powiedzieæ - nie tylko nieprecyzyjnie, ale nawet nieprawdziwie:<br>
"Metoda dblVal zwraca tablicê, warto¶ci elementów której s± podwojonymi warto¶ciami
elementów tablicy przekazanej jako argument".<br>
<br>

<div class="notec">Czêsto dla uproszczenia bêdziemy mówiæ, ¿e metoda otrzymuje jako argument
- tablicê i zwraca jako wynik - tablicê. Jest to skrót my¶lowy: pamiêtajmy,
¿e zawsze chodzi o referencje do tablic</div>

<br>
<p>
Pamiêtamy, ¿e w Javie argumenty przekazywane s± metodom przez warto¶æ.<br>
Gdy argumentem jest zmienna tablicowa - przekazywana jest referencja do tablicy
- i tej oczywi¶cie w metodzie nie jeste¶my w stanie efektywnie zmieniæ. Nic
jednak nie stoi na przeszkodzie, by zmieniæ elementy przekazanej tablicy.<br>
<br>
Obrazuje to poni¿szy program.<br>

<pre>
public class Test3 {

  public static void main(String[] args) {
    new Test3();
  }

  Test3() {
    int[] tab = { 2, 5, 7 };
    chgTab1(tab);
    showTab("Po wywo³aniu metody chgTab1 tablica oznaczana przez tab", tab);
    chgTab2(tab);
    showTab("Po wywo³aniu metody chgTab2 tablica oznaczana przez tab", tab);
  }

  void chgTab1(int[] tab) {
    int[] nowa = { 3, 6, 8 };
    tab = nowa;
    showTab("W metodzie chgTab1 tablica oznaczana przez tab", tab);
  }

  void chgTab2(int[] tab) {
    for (int i=0; i &lt; tab.length; i++) tab[i]++;
  }

  void showTab(String s, int[] tab) {
    System.out.println(s);
    for (int i=0; i &lt; tab.length; i++) System.out.print(" " + tab[i]);
    System.out.print('\n');
  }

}
</pre>

<p>
który da nastêpuj±cy wynik:<br>
<br>

<div class="listing100">W metodzie chgTab1 tablica oznaczana przez tab<br>
 3 6 8<br>
Po wywo³aniu metody chgTab1 tablica oznaczana przez tab<br>
 2 5 7<br>
Po wywo³aniu metody chgTab2 tablica oznaczana przez tab<br>
 3 6 8</div>

<br>

<p>
Pora na bardziej praktyczne æwiczenia.<br>
 Zadanie. Napisaæ program-klasê, w którym dostarczane s± metody operuj±ce na tablicach liczb ca³kowitych:<br>
<ul>
  <li>sum - zwracaj±ca sumê wszystkich elementów przekazanej tablicy</li>
  <li>max - zwracaj±ca maksymalny element przekazanej tablicy</li>
  <li>min - zwracaj±ca minimalny element w przekazanej tablicy</li>
  <li>average -zwracaj±ca ¶redni± arytmetyczn± elementów przekazanej tablicy</li><li>increase - zwiêkszaj±ca warto¶ci elementów przekazanej tablicy</li>
  <li>decrease - zmneijszaj±ca warto¶ci elementów przekazanej tablicy</li>
  <li>add - zwracaj±ca tablicê, której elementy s± sum± elementów dwóch przekazanych tablic<br>
  </li>

</ul>

<p>
Przetestowaæ dzia³anie metod za pomoc± dwóch tablic inicjowanych w tek¶cie programu.<br>
<br>

<div class="important"><br>
Przed lektur± dalszego tekstu proszê rozwi±zaæ to zadanie samodzielnie<br>
<br>
</div>

<br>
<p>
Rozwi±zanie:<br>

<pre>
public class IntTab {

  public int sum(int[] a) {
    int sum = 0;
    for (int i=0; i &lt; a.length; i++) sum += a[i];
    return sum;
  }

  public int max(int[] a) {
    int max = a[0];
    for (int i=1; i &lt; a.length; i++)
      if (a[i] &gt; max) max = a[i];
    return max;
  }

  public int min(int[] a) {
    int min = a[0];
    for (int i=1; i &lt; a.length; i++)
      if (a[i] &lt; min) min = a[i];
    return min;
  }

  public double average(int[] a) {
    double l = a.length;          <font color="#3333ff">// a dlaczego tak ?</font>
    return sum(a)/l;              // - by dzielenie da³o wynik typu double
  }

  public void increase(int[] a) {
    for (int i=0; i &lt; a.length; i++) a[i]++;
  }

  public void decrease(int[] a) {
    for (int i=0; i &lt; a.length; i++) a[i]--;
  }

  public int[] add(int[] a, int[] b) {
    if (a.length != b.length) {
       System.out.println("Rozmiary tablic musz± byæ takie same");
       return null;
    }
    int[] suma = new int[a.length];
    for (int i=0; i &lt; a.length; i++) suma[i] = a[i] + b[i];
    return suma;
  }


  public static void main(String[] args) {
    new IntTab();
   }

  public IntTab() {
    int[] x = { 1, 3, 5 };
    int[] y = { 2, 4, 6 };
    showScalar("Suma x", sum(x) );
    showScalar("Suma y", sum(y) );
    showScalar("Max x", max(x) );
    showScalar("Max y", max(y) );
    showScalar("Min x", min(x) );
    showScalar("Min y", min(y) );
    showScalar("Srednia x", average(x) );
    showScalar("Srednia y", average(y) );
    increase(x);
    increase(y);
    showArr("x po zwiekszeniu", x);
    showArr("y po zwiekszeniu", y);
    decrease(x);
    decrease(y);
    showArr("x po zmniejszeniu", x);
    showArr("y po zmniejszeniu", y);
    showArr("x + y", add(x,y));
 }

 private void showScalar(String s, int v) {   <font color="#3333ff">// metoda przeci±¿ona</font>
    System.out.println(s + " = " + v);
 }

 private void showScalar(String s, double v) { <font color="#3333ff">// metoda przeci±¿ona</font>
    System.out.println(s + " = " + v);
 }

 private void showArr(String s, int[] a) {
   System.out.println(s + ":");
   for (int i=0; i &lt; a.length; i++) System.out.print(" " + a[i]);
   System.out.print('\n');
 }

}
</pre>

<p>
Wynik dzia³ania programu:<br><br>

<div class="listing100">
Suma x = 9<br>
Suma y = 12<br>
Max x = 5<br>
Max y = 6<br>
Min x = 1<br>
Min y = 2<br>
Srednia x = 3.0<br>
Srednia y = 4.0<br>
x po zwiekszeniu:<br>
 2 4 6<br>
y po zwiekszeniu:<br>
 3 5 7<br>
x po zmniejszeniu:<br>
 1 3 5<br>
y po zmniejszeniu:<br>
 2 4 6<br>
x + y:<br>
 3 7 11<br>
</div><p><br clear="all"><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td align="left"><A HREF="index88.html" TARGET="_top"  class="NAWIGACJA">&#171;&nbsp;poprzedni punkt</a>&nbsp;</td><td align="right">&nbsp;<A HREF="index90.html" TARGET="_top" class="NAWIGACJA">nastêpny punkt&nbsp;&#187;</a></td></tr></table></td>
</tr>
</table>
</body>
</html>
